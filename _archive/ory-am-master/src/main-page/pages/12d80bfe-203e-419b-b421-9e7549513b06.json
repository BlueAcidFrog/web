{
  "id": "12d80bfe-203e-419b-b421-9e7549513b06",
  "url": "run-oauth2-server-open-source-api-security.html",
  "meta": {
    "description": "Run your own open source OAuth2 server - step by step guide",
    "title": "Run your own open source OAuth2 server - step by step guide"
  },
  "design": {
    "config": {
      "ory-design-clarke": {
        "headerBackgroundUrl": "images/pexels-photo-65125.jpeg",
        "headerDarkenLevel": 0.4
      }
    }
  },
  "title": "Run and install ORY Hydra",
  "content": {
    "header": {
      "id": "aec4af4f-017a-4408-ae4f-f8042f79c470",
      "cells": [
        {
          "id": "e188db1b-5fe6-4da1-84b6-8a05a4b70c55",
          "inline": null,
          "size": 12,
          "content": {
            "plugin": {
              "name": "ory/editor/core/content/slate",
              "version": "0.0.1"
            },
            "state": {
              "serialized": {
                "nodes": [
                  {
                    "kind": "block",
                    "type": "HEADINGS/HEADING-ONE",
                    "nodes": [
                      {
                        "kind": "text",
                        "text": "RUN YOUR OWN\nOAuth2 Server"
                      }
                    ],
                    "data": {
                      "align": "left"
                    }
                  },
                  {
                    "kind": "block",
                    "type": "HEADINGS/HEADING-TWO",
                    "nodes": [
                      {
                        "kind": "text",
                        "text": "api security using SECURE AND\nscalable open source technology"
                      }
                    ],
                    "data": {
                      "align": "left"
                    }
                  }
                ]
              }
            }
          }
        }
      ]
    },
    "main": {
      "id": "08a64630-497e-4782-902d-62fe26b18483",
      "cells": [
        {
          "id": "70012451-b1e3-4e3f-bb52-adbaf8496ccc",
          "inline": null,
          "size": 12,
          "rows": [
            {
              "id": "9135e750-fd22-4e3a-8e29-a5f216a8e921",
              "cells": [
                {
                  "id": "f8be8166-b3c5-43c8-a35d-c7b23ffda8fb",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {
                      "flavor": "grey"
                    }
                  },
                  "rows": [
                    {
                      "id": "411cff3d-ec3d-4b89-a0a7-180243f77d14",
                      "cells": [
                        {
                          "id": "b28034ae-a609-4f99-a119-37424b5cccf5",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "In this guide, you will set up a hardened, fully functional OAuth 2.0 (OAuth2) server. It will take you about ~15 minutes. This guide is for you, if you are looking to do something like in the gif on the right, or more specifically:"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "LISTS/UNORDERED-LIST",
                                    "nodes": [
                                      {
                                        "kind": "block",
                                        "type": "LISTS/LIST-ITEM",
                                        "nodes": [
                                          {
                                            "kind": "block",
                                            "type": "PARAGRAPH/PARAGRAPH",
                                            "nodes": [
                                              {
                                                "kind": "text",
                                                "text": "You want to use OAuth2 for API security."
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "kind": "block",
                                        "type": "LISTS/LIST-ITEM",
                                        "nodes": [
                                          {
                                            "kind": "block",
                                            "type": "PARAGRAPH/PARAGRAPH",
                                            "nodes": [
                                              {
                                                "kind": "text",
                                                "text": "You want to open up your API to third party developers like "
                                              },
                                              {
                                                "kind": "inline",
                                                "type": "LINK/LINK",
                                                "nodes": [
                                                  {
                                                    "kind": "text",
                                                    "text": "Dropbox"
                                                  }
                                                ],
                                                "data": {
                                                  "href": "https://www.dropbox.com/developers"
                                                }
                                              },
                                              {
                                                "kind": "text",
                                                "text": ", or "
                                              },
                                              {
                                                "kind": "inline",
                                                "type": "LINK/LINK",
                                                "nodes": [
                                                  {
                                                    "kind": "text",
                                                    "text": "GitHub"
                                                  }
                                                ],
                                                "data": {
                                                  "href": "https://developer.github.com/v3/"
                                                }
                                              },
                                              {
                                                "kind": "text",
                                                "text": "."
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "kind": "block",
                                        "type": "LISTS/LIST-ITEM",
                                        "nodes": [
                                          {
                                            "kind": "block",
                                            "type": "PARAGRAPH/PARAGRAPH",
                                            "nodes": [
                                              {
                                                "kind": "text",
                                                "text": "You want to become an identity provider like "
                                              },
                                              {
                                                "kind": "inline",
                                                "type": "LINK/LINK",
                                                "nodes": [
                                                  {
                                                    "kind": "text",
                                                    "text": "Google"
                                                  }
                                                ],
                                                "data": {
                                                  "href": "https://developers.google.com/identity/"
                                                }
                                              },
                                              {
                                                "kind": "text",
                                                "text": ", "
                                              },
                                              {
                                                "kind": "inline",
                                                "type": "LINK/LINK",
                                                "nodes": [
                                                  {
                                                    "kind": "text",
                                                    "text": "Facebook"
                                                  }
                                                ],
                                                "data": {
                                                  "href": "https://developers.facebook.com/docs/facebook-login"
                                                }
                                              },
                                              {
                                                "kind": "text",
                                                "text": ", or "
                                              },
                                              {
                                                "kind": "inline",
                                                "type": "LINK/LINK",
                                                "nodes": [
                                                  {
                                                    "kind": "text",
                                                    "text": "Twitter"
                                                  }
                                                ],
                                                "data": {
                                                  "href": "https://dev.twitter.com/web/sign-in"
                                                }
                                              },
                                              {
                                                "kind": "text",
                                                "text": "."
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "kind": "block",
                                        "type": "LISTS/LIST-ITEM",
                                        "nodes": [
                                          {
                                            "kind": "block",
                                            "type": "PARAGRAPH/PARAGRAPH",
                                            "nodes": [
                                              {
                                                "kind": "text",
                                                "text": "You need to federate (delegate) authentication or authorization."
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "We will use "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "ORY Hydra"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/ory/hydra"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " (open source), a security-first OAuth2 and OpenID Connect server written in Golang."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "d4b302f0-2271-47da-8d29-1e8c321cb205",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/image",
                              "version": "0.0.1"
                            },
                            "state": {
                              "src": "images/oauth2-flow.gif"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "470c8307-24a8-48a1-ac76-cf6005d39d37",
                      "cells": [
                        {
                          "id": "a82e3523-f5d7-4408-8e6f-0d0a51ffd310",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "This is how ORY Hydra works"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "I originally built ORY Hydra because all other OAuth2 servers forced their user management on me. But I had a user management in place already, and did not want to migrate away from it. Some of the providers allowed me to integrate with LDAP or SAML, but this was not implemented in my user management."
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "ORY Hydra defines a consent flow which let's you implement the bridge between ORY Hydra and your user management easily using only a few lines of code. If you want, you could say that ORY Hydra translates the user information you provide to OAuth2 Access Tokens and OpenID Connect ID Tokens, which are then reusable across all your applications (web app, mobile app, CRM, Mail, ...) and also by third-party developers."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "512261d4-73b2-4268-857c-16893dd6cddf",
                      "cells": [
                        {
                          "id": "5a2c9507-f740-4330-b766-b1ebe58d554e",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Sounds good, let's go!"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "You're hooked? Great! Let's start by downloading some docker images. By the way, this tutorial relies heavily on docker. If you haven't already, please install docker now."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "1bc8f6d6-9579-4714-9bd4-8abbc21ff215",
              "cells": [
                {
                  "id": "0275d651-2488-4e40-a1d0-15f0525f0aff",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {
                      "flavor": "white"
                    }
                  },
                  "rows": [
                    {
                      "id": "1730a633-1ab2-4b46-9943-e57374c0c4b9",
                      "cells": [
                        {
                          "id": "bac36a1d-1957-4085-bf8a-701f9964ffe4",
                          "inline": null,
                          "size": 6,
                          "rows": [
                            {
                              "id": "1e7e5414-3301-40ff-88bf-43b404bbf9c3",
                              "cells": [
                                {
                                  "id": "c9b5fae6-fcff-4e78-b0e2-215c683b6b4b",
                                  "inline": null,
                                  "size": 12,
                                  "content": {
                                    "plugin": {
                                      "name": "ory/editor/core/content/slate",
                                      "version": "0.0.1"
                                    },
                                    "state": {
                                      "serialized": {
                                        "nodes": [
                                          {
                                            "kind": "block",
                                            "type": "HEADINGS/HEADING-TWO",
                                            "nodes": [
                                              {
                                                "kind": "text",
                                                "text": "Install and run PostgreSQL"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              ]
                            },
                            {
                              "id": "8d0c3807-b6ee-4b8e-8d4f-320f9dda89d1",
                              "cells": [
                                {
                                  "id": "7b043bc0-078d-4417-8ac7-46a2a4154635",
                                  "inline": null,
                                  "size": 12,
                                  "content": {
                                    "plugin": {
                                      "name": "ory/editor/core/content/slate",
                                      "version": "0.0.1"
                                    },
                                    "state": {
                                      "serialized": {
                                        "nodes": [
                                          {
                                            "kind": "block",
                                            "type": "PARAGRAPH/PARAGRAPH",
                                            "nodes": [
                                              {
                                                "kind": "text",
                                                "text": "First, a database is required, and we will choose PostgreSQL 9.6 (MySQL is also supported)."
                                              }
                                            ]
                                          },
                                          {
                                            "kind": "block",
                                            "type": "PARAGRAPH/PARAGRAPH",
                                            "nodes": [
                                              {
                                                "kind": "text",
                                                "ranges": [
                                                  {
                                                    "text": "This docker command starts postgres container "
                                                  },
                                                  {
                                                    "text": "ory-hydra-example--postgres",
                                                    "marks": [
                                                      {
                                                        "type": "CODE/CODE",
                                                        "data": {}
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "text": " and sets up a database called "
                                                  },
                                                  {
                                                    "text": "hydra",
                                                    "marks": [
                                                      {
                                                        "type": "CODE/CODE",
                                                        "data": {}
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "text": " with user "
                                                  },
                                                  {
                                                    "text": "hydra",
                                                    "marks": [
                                                      {
                                                        "type": "CODE/CODE",
                                                        "data": {}
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "text": " and password "
                                                  },
                                                  {
                                                    "text": "secret",
                                                    "marks": [
                                                      {
                                                        "type": "CODE/CODE",
                                                        "data": {}
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "text": "."
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": "3338db81-7d14-414b-8a8a-38e3c096a4a3",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ docker run \\\n  --name ory-postgres \\\n  -e POSTGRES_USER=hydra \\\n  -e POSTGRES_PASSWORD=secret \\\n  -e POSTGRES_DB=hydra \\\n  -d postgres:9.6"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "1e20fbb7-1471-49da-a871-c7e3623d98ce",
                      "cells": [
                        {
                          "id": "de276204-9eeb-44f1-830a-557ae30b7254",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "By the way, don't deploy databases using docker in production. It will make your life miserable. Use a managed solution like "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Amazon RDS"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://aws.amazon.com/de/rds/"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " or "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Google Cloud SQL"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://cloud.google.com/sql/docs/"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": ". Even small instances will be able to serve a lot of traffic, check out some of the "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "benchmarks"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/ory/hydra/issues/161"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": "."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "c9a4e27a-f76a-4f06-8f10-3413cbed3dd8",
              "cells": [
                {
                  "id": "f82b4131-1b76-4a4b-ad9d-a8ad3c640fab",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {}
                  },
                  "rows": [
                    {
                      "id": "9191ebf5-3987-4eb3-93f3-c9ddd450e4d3",
                      "cells": [
                        {
                          "id": "be6a8b86-98bf-4fa6-89ef-34c2aa234c2a",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-TWO",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Configure the environment"
                                      }
                                    ],
                                    "data": {
                                      "align": "center"
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "f60987b0-0ac6-461e-b7f2-425493dce552",
                      "cells": [
                        {
                          "id": "7ee89f4d-ef8a-4a7d-b931-ed32a5436568",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ export SYSTEM_SECRET=y82XL-wAPCCZu+B4"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "70742c42-484e-4b32-a446-dd194fe7c705",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "System Secret"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "The "
                                          },
                                          {
                                            "text": "system secret ",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "is used to "
                                          },
                                          {
                                            "text": "encrypt data ",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "at rest, and to "
                                          },
                                          {
                                            "text": "sign tokens",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " and authorize codes. Once a database is initialized with a system secret, you always need to use that secret to access the database."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "b8932f73-7eea-4ec4-a524-b49f19f23698",
                      "cells": [
                        {
                          "id": "69786a3c-46ce-4eb8-af07-0d7932f2efbb",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ export DATABASE_URL=postgres://hydra:secret@postgres:5432/hydra?sslmode=disable"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "b2589b5e-517d-4abd-b59a-31b21414004f",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Database"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "The database url must point to the postgres container we created above. The database will be used to persist and query data. "
                                          },
                                          {
                                            "text": "ORY Hydra prevents data leaks",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " as only token signatures are stored in the database. For a valid token, both payload and signature are required."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "d4bbef43-c859-4650-9e45-420c2315576e",
                      "cells": [
                        {
                          "id": "39deec4e-3824-4d53-94d5-6339ee379d1b",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ docker pull oryd/hydra:v0.9.12\n$ docker run \\\n  --link ory-postgres:postgres \\\n  -it --entrypoint \\\n  hydra oryd/hydra:latest \\\n  migrate sql $DATABASE_URL\n"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "b2d55a34-1ec1-4b5e-8e6a-4107cd8f9aa2",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Initialize the database"
                                      }
                                    ],
                                    "data": {
                                      "align": "left"
                                    }
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Next, the database needs to be initialized. This can be achieved with "
                                          },
                                          {
                                            "text": "hydra migrate sql",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ". Here we pull the latest docker image for ORY Hydra and run a container that executes the migrate command."
                                          }
                                        ]
                                      }
                                    ],
                                    "data": {
                                      "align": "left"
                                    }
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "To prevent bad things from happening, SQL migrations are never run without you explicitly telling them to. This is the case for new and existing databases."
                                      }
                                    ],
                                    "data": {
                                      "align": "left"
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "29d9aeec-c98b-4961-ab8a-d60ffbb397ed",
              "cells": [
                {
                  "id": "f2e4b7f3-9715-49d6-919a-442c5d4c18d6",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {
                      "flavor": "white"
                    }
                  },
                  "rows": [
                    {
                      "id": "bf48e3c5-2b7b-41ab-bb7d-0ec92181be00",
                      "cells": [
                        {
                          "id": "0baf06b2-a4f1-4456-868d-3fd02a6be826",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-TWO",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Run the OAuth2 server"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Besides setting the "
                                          },
                                          {
                                            "text": "system secret ",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "("
                                          },
                                          {
                                            "text": "SYSTEM_SECRET",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "), the "
                                          },
                                          {
                                            "text": "database url ",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "("
                                          },
                                          {
                                            "text": "DATABASE_URL",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "), the "
                                          },
                                          {
                                            "text": "public url",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " ("
                                          },
                                          {
                                            "text": "ISSUER",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ") of the server and the "
                                          },
                                          {
                                            "text": "root client credentials",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " ("
                                          },
                                          {
                                            "text": "FORCE_ROOT_CLIENT_CREDENTIALS",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ") used to manage ORY Hydra, a "
                                          },
                                          {
                                            "text": "consent url",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " ("
                                          },
                                          {
                                            "text": "CONSENT_URL",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ") is passed using environment variables."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "The "
                                          },
                                          {
                                            "text": "consent url",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " points to a web service which will be explained and set up in the next sections. It connects Hydra to your identity management and is part of the "
                                          },
                                          {
                                            "text": "consent flow",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Please use more secure values in production. ;)",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/EM",
                                                "data": {}
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "2a19a407-63a4-496d-a2a5-c17cec49928a",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ docker run -d \\\n  --name ory-hydra \\\n  --link ory-postgres:postgres \\\n  -p 9000:4444 \\\n  -e SYSTEM_SECRET=$SYSTEM_SECRET \\\n  -e DATABASE_URL=$DATABASE_URL \\\n  -e ISSUER=https://localhost:9000/ \\\n  -e CONSENT_URL=http://localhost:9020/consent \\\n  -e FORCE_ROOT_CLIENT_CREDENTIALS=admin:demo-password \\\n  oryd/hydra:v0.9.12"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "9424164c-1350-4190-8887-55dcca23ad8c",
                      "cells": [
                        {
                          "id": "04f310db-b30f-4d4f-b64f-2363e184e2ca",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Is it alive?"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "This is easy to answer, just check the docker logs! Or, "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "open the health check"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://localhost:9000/health"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": ", which should show you "
                                          },
                                          {
                                            "text": "ok",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "If asked, "
                                          },
                                          {
                                            "text": "accept the self signed certificate",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " in your browser."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "39696371-7fc3-4856-b751-7057ea41e1b2",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ docker logs ory-hydra\n\n[...]\r\ntime=\"2017-06-29T21:26:34Z\" level=info msg=\"Setting up http server on :4444\""
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "9dd2e143-e1a4-4669-a62f-f171a96d1adf",
              "cells": [
                {
                  "id": "4c26af75-27fe-4d45-8a8b-e5f83dcb1a2b",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {}
                  },
                  "rows": [
                    {
                      "id": "c066092c-3558-4b5e-b44d-f9b1977de383",
                      "cells": [
                        {
                          "id": "3b6322dd-4872-499a-a05c-944f12bb2dda",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-TWO",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Generate and validate tokens"
                                      }
                                    ],
                                    "data": {
                                      "align": "center"
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "9dab5002-eaaa-4414-81f2-f5daa47e36ae",
                      "cells": [
                        {
                          "id": "f24b89c9-f027-4b72-bd2c-6dd5b6583863",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ docker run -p 9010:4445 \\\n  --link ory-hydra:hydra \\\n  -it --entrypoint \"/bin/sh\" \\\n  oryd/hydra:v0.9.12"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "2bd4768b-b058-4b6b-8d77-73a97cbf4e2e",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "SSH into bash container with Hydra"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "In this section, you will connect to the Hydra instance and generate and validate access tokens for the root client. To save you the trouble of installing Hydra locally, SSH into a container running bash with the ORY Hydra command line interface (CLI) installed."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "ddc573cd-816b-4894-bacd-fc4458ec4d8b",
                      "cells": [
                        {
                          "id": "93f0c711-272e-4df8-bfb6-70ea88dd7201",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "\r$ hydra connect\r\n\nCluster URL []: https://hydra:4444\nClient ID []: admin\nClient Secret [empty]: demo-password"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "e89667d8-6b00-433e-a5a0-f8af976bb53c",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Connect with Hydra"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "The command line interface (CLI) needs to know where Hydra is and what client id and secret should be used. Since we used "
                                          },
                                          {
                                            "text": "FORCE_ROOT_CLIENT_CREDENTIALS=admin:demo-password",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " when creating the container, we know that the combination is "
                                          },
                                          {
                                            "text": "admin:demo-password",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "484cd233-cf3a-464c-b79e-519968938487",
                      "cells": [
                        {
                          "id": "cce4c55e-aa04-43c2-b720-cffb0a1e934c",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ hydra token client --skip-tls-verify\n\ntY9tGakiYAUn8VIGn_yCDlTahckSfGbDQIlXahjXtX0.BQlCxRDL3ngag6hdsSl9N2qrz7R399cQMfld8aI2Mlg"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "c39ed465-6096-4a2d-88ca-683f44f71fbb",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Issue an access token"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Using "
                                          },
                                          {
                                            "text": "hydra token client it",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " is possible to obtain an access token for the client we used during "
                                          },
                                          {
                                            "text": "hydra connect",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ", in our case that's admin."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Because only a self-signed TLS (for HTTPS) certificate is available, all interactions must skip TLS certificate verification which can be achieved with the flag "
                                          },
                                          {
                                            "text": "--skip-tls-verify",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "7a288672-6369-4a7b-831e-c979d2f1775b",
                      "cells": [
                        {
                          "id": "77a197c9-0ae0-42eb-9d68-0702fdcca732",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ hydra token validate \\\n  --skip-tls-verify \\\n  $(hydra token client --skip-tls-verify)\n\n{\n  \"active\": true,\n  \"sub\": \"admin\",\n[...]"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "06551d72-0b9f-43cd-8551-54aa0b0f58ff",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Validate an access token"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Using "
                                          },
                                          {
                                            "text": "hydra token validate",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " it is possible to validate an access token, and receive it's payload. ORY Hydra uses opaque tokens to greatly reduce attack vectors. The payload of the token can be modified using the "
                                          }
                                        ]
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "ranges": [
                                              {
                                                "text": "consent response",
                                                "marks": [
                                                  {
                                                    "type": "EMPHASIZE/STRONG",
                                                    "data": {}
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ],
                                        "data": {
                                          "href": "https://ory.gitbooks.io/hydra/content/oauth2.html#consent-app-flow"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": "."
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "You can validate access tokens using the "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Introspection API"
                                          }
                                        ],
                                        "data": {
                                          "href": "http://docs.hydra13.apiary.io/#reference/oauth2/oauth2introspect"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": ", standardized as "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "IETF OAuth 2.0 Token Introspection"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://tools.ietf.org/html/rfc7662"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": "."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "ee54d87e-781d-4c62-8c51-5428b112231e",
              "cells": [
                {
                  "id": "f113779f-c647-467d-8a55-d8941e077ccb",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {
                      "flavor": "white"
                    }
                  },
                  "rows": [
                    {
                      "id": "fb87f039-cdd1-4a02-acdc-bf1c98d7f9f3",
                      "cells": [
                        {
                          "id": "2b966895-71d3-475d-ae7c-135f76869247",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-TWO",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "The consent flow"
                                      }
                                    ],
                                    "data": {
                                      "align": "center"
                                    }
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "ORY Hydra is not an "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Identity Management"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://en.wikipedia.org/wiki/Identity_management"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " solution. Instead it uses your existing Identity Management which reduces adoption complexity. OAuth2 providers such as Keycloak, OpenAM, or IdentityServer are usually full-stack enterprise identity and access management solutions. They come with complex deployment dependencies, technologies not particularly suited for cloud native environments, and subtle, but annoying limitations at scale. ORY Hydra solves OAuth2 and OpenID Connect only, but it solves it well and extremely scalable."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "2873fb6d-1861-4674-9fec-35c38af7f5ac",
                      "cells": [
                        {
                          "id": "900db6f2-5fa7-44b2-b7d6-e5f6d34561e2",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "To authenticate users, ORY Hydra defines the "
                                          },
                                          {
                                            "text": "consent flow.",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " Example consent apps are available for "
                                          }
                                        ]
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Go"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/ory/hydra-consent-app-go/blob/master/main.go"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " and "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Node"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/ory/hydra-consent-app-express"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " as well as Consent SDKs for both languages."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "8cd69eec-9c2c-4cf3-b5da-ffe8ac2f6b1d",
                      "cells": [
                        {
                          "id": "e940682d-4ac3-4bd1-a027-852886db902c",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/image",
                              "version": "0.0.1"
                            },
                            "state": {
                              "src": "images/ORY Hydra Consent Flow.png"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "86a450f2-ef0d-47d1-ac9d-8aeb37fd47c7",
                      "cells": [
                        {
                          "id": "b58b9253-5777-441f-933b-5bb300713e01",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Create a consent client"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "The consent app requires a registered OAuth 2.0 Client with the ability to access ("
                                          },
                                          {
                                            "text": "scope",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ") cryptographic keys ("
                                          },
                                          {
                                            "text": "hydra.keys.get",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ") through OAuth2 Access Tokens. The keys are required for validating and signing the consent challenge and the consent response."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "3b589be9-eb2b-47fc-8e45-fa885f80a05a",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ hydra clients create --skip-tls-verify \\\n  --id consent-app \\\n  --secret consent-secret \\\n  --name \"Consent App Client\" \\\n  --grant-types client_credentials \\\n  --response-types token \\\n  --allowed-scopes hydra.keys.get"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "a00a1982-80a5-4921-a04a-6315c6f3c077",
                      "cells": [
                        {
                          "id": "95e35a1a-349d-46b3-a468-d1239d735e84",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Create access control policies for consent client"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "ORY Hydra uses access control policies internally. This functionality is exposed as the "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Warden API"
                                          }
                                        ],
                                        "data": {
                                          "href": "http://docs.hydra13.apiary.io/#reference/warden"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": ". Since the consent app requires access to cryptographic keys, an access control policy for "
                                          },
                                          {
                                            "text": "consent-app",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " has to be created as well. This is different from an OAuth2 scope as it regulates the capabilities of the user ("
                                          },
                                          {
                                            "text": "consent-app",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "), not the scope of the access token."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Read more about "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "access control policies"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://ory.gitbooks.io/hydra/content/access-control.html"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": "."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "5ca5be3c-76fc-41e1-94be-ffb5b4d44971",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ hydra policies create --skip-tls-verify \\\n  --actions get \\\n  --allow \\\n  --id consent-app-policy \\\n  --resources \"rn:hydra:keys:hydra.consent.<.*>\" \\\n  --subjects consent-app"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "cd3e5530-3541-41ef-b7da-05888fbca80e",
                      "cells": [
                        {
                          "id": "ed9481fc-b828-4503-8823-a2d6168741ce",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Run the consent app container"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Since there is an "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "exemplary consent app for NodeJS"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/ory/hydra-consent-app-express"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": " available, let's use that one in docker and connect it to ORY Hydra. You need to "
                                          },
                                          {
                                            "text": "run this command in a different shell",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ". After running this command, return to the shell above for the remainder of this article."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "f19f3ac6-bfb3-49ea-b4c5-d264f849dbfe",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ docker run -d \\\n  --name ory-consent \\\n  --link ory-hydra:hydra \\\n  -p 9020:3000 \\\n  -e HYDRA_CLIENT_ID=consent-app \\\n  -e HYDRA_CLIENT_SECRET=consent-secret \\\n  -e HYDRA_URL=https://hydra:4444 \\\n  -e NODE_TLS_REJECT_UNAUTHORIZED=0 \\\n  oryd/hydra-consent-app-express:latest\r"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "0765fb44-5cb4-481e-8549-d92ab0d90725",
              "cells": [
                {
                  "id": "3d973c50-ad34-40c2-a49a-8aa8ef4dc1a4",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {}
                  },
                  "rows": [
                    {
                      "id": "dde57035-2b63-4d6d-8b3f-2b759ecfde30",
                      "cells": [
                        {
                          "id": "6cb1a999-f803-487d-9904-9166a035d5b6",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-TWO",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "OAuth2 + OpenID Connect Authorize Flow"
                                      }
                                    ],
                                    "data": {
                                      "align": "center"
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "fc761207-601c-45f2-beaf-70d32e844b7e",
                      "cells": [
                        {
                          "id": "06a53c88-65cc-45b9-b944-363892a59aa7",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Create OAuth2 Consumer App"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Awesome, the infrastructure is now set up! To perform the OAuth 2.0 and OpenID Connect flow, an OAuth 2.0 Client (consumer app) is required."
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "The client must be able to request the "
                                          },
                                          {
                                            "text": "authorize_code",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " grant, scopes "
                                          },
                                          {
                                            "text": "openid",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " and "
                                          },
                                          {
                                            "text": "offline",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ", and response types "
                                          },
                                          {
                                            "text": "token",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ", "
                                          },
                                          {
                                            "text": "code",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ", and "
                                          },
                                          {
                                            "text": "id_token",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Allowing the "
                                          },
                                          {
                                            "text": "hydra.clients.get",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " let's us request tokens capable of querying OAuth 2.0 Clients stored in ORY Hydra. This is just for demonstration purposes."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "2c956814-2c23-4563-aea1-829ef4011a5b",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ hydra clients create --skip-tls-verify \\\n  --id some-consumer \\\n  --secret consumer-secret \\\n  -g authorization_code,refresh_token,client_credentials \\\n  -r token,code,id_token \\\n  --allowed-scopes openid,offline,hydra.clients \\\n  --callbacks http://localhost:9010/callback\n\nClient ID: some-consumer\nClient Secret: consumer-secret"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "34ce181e-2713-481c-b694-6206a61d213a",
                      "cells": [
                        {
                          "id": "12450eec-0c55-424f-808b-ff31d524bb44",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Perform OAuth 2.0 Authorize Code Flow"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "To initialize an OAuth 2.0 authorize code flow, use the "
                                          },
                                          {
                                            "text": "hydra token user",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " command. It will generate the authorization url which the user must open in the browser. Requesting the authorization is the first step of the OAuth 2.0 authorize code flow."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "We also request that the token allows us to manage and fetch OAuth 2.0 Clients from the database using the scope "
                                          },
                                          {
                                            "text": "hydra.clients",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ". We will use the token later to fetch those clients in an example."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Requesting OAuth 2.0 Access and Refresh tokens is usually done using a library for your programming language. Do not write this on your own. Here are some libraries for different languages: "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "Golang"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/golang/oauth2"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": ", "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "NodeJS"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/lelylan/simple-oauth2"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": ", "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "PHP"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/thephpleague/oauth2-client"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": "."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "e045a406-d895-4a05-8004-bca7a94418b0",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ hydra token user --skip-tls-verify \\\n  --auth-url https://localhost:9000/oauth2/auth \\\n  --token-url https://hydra:4444/oauth2/token \\\n  --id some-consumer \\\n  --secret consumer-secret \\\n  --scopes openid,offline,hydra.clients \\\n  --redirect http://localhost:9010/callback\n\nSetting up callback listener on http://localhost:4445/callback\nPress ctrl + c on Linux / Windows or cmd + c on OSX to end the process.\nIf your browser does not open automatically, navigate to:\n\n        https://localhost:9000/oauth2/auth?client_id=some-consumer&redirect_uri=http%3A%2F%2Flocalhost%3A9020%2Fcallback&response_type=code&scope=openid+offline+hydra.clients&state=hfcyxoqoctwbnvrxrsuwgzfu&nonce=lbeouolavuvcdhjefcnzlqur"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "221d5ca1-bc50-4395-b689-34bb4331d0f4",
                      "cells": [
                        {
                          "id": "5c1e8e6e-b149-485f-9bbc-585d93e84ca6",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Login & Consent"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Next, you will be shown two screens. One is the log-in screen, and the other is the screen asking the users which permissions he want's to grant. These two screens are fully in your control and you can do anything you want here. Just remember the security implications of, for example, automatically granting everyone admin rights. ;)"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "0d5660b3-af52-4cf8-9e33-77931e32f80b",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/image",
                              "version": "0.0.1"
                            },
                            "state": {
                              "src": "images/articles/hydra-guide/consent-login.png"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "b2f8bbff-450e-442d-a42b-11374daff484",
                      "cells": [
                        {
                          "id": "c5f5080d-d444-430c-8a38-a76abda0a85a",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "In the consent screen, make sure to tick all the boxes! You can try how the system works when not checking all of them later."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "5f4d2c39-584b-4df8-80d8-04c5c72c0707",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/image",
                              "version": "0.0.1"
                            },
                            "state": {
                              "src": "images/articles/hydra-guide/consent-authz.png"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "5d8077a3-f139-4410-8040-d425204eb8bf",
                      "cells": [
                        {
                          "id": "2d47373e-5b1e-48b7-91cc-bdbaed85cd80",
                          "inline": null,
                          "size": 5,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Access Token, Refresh Token & ID Token!"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Once you logged in and granted some scopes, ORY Hydra will issue an access, a refresh (if scope "
                                          },
                                          {
                                            "text": "offline",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " was granted), and an id token (if scope "
                                          },
                                          {
                                            "text": "openid",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " was granted)."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "4cb4323f-35b0-484f-8691-2d106ddad5cd",
                          "inline": null,
                          "size": 7,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/image",
                              "version": "0.0.1"
                            },
                            "state": {
                              "src": "https://ory.gitbooks.io/hydra/content/images/install-result.png"
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "d82c646c-3531-411e-86f0-8edc83dc689c",
              "cells": [
                {
                  "id": "5766b2fd-1f6f-470c-8a13-65bb509c1402",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {
                      "flavor": "white"
                    }
                  },
                  "rows": [
                    {
                      "id": "6a8b6513-cff2-44e6-9192-add521926d4a",
                      "cells": [
                        {
                          "id": "8c5968bb-0c52-435b-a1c5-27ef34e8ff3e",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-TWO",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Make an authorized request"
                                      }
                                    ],
                                    "data": {
                                      "align": "center"
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "38ce2b47-7cfc-4a1e-b74a-d91d8d3a815b",
                      "cells": [
                        {
                          "id": "fedf9096-82e5-4eba-ab71-3a66bce31cf0",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "The last part of this tutorial is going to teach you how to "
                                          },
                                          {
                                            "text": "make an authorized request",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": ". For demonstration purposes, we will use an ORY Hydra API. It is however no different from how requests would look like to your API."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Run these commands in a new shell",
                                            "marks": [
                                              {
                                                "type": "EMPHASIZE/STRONG",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " where you have access to curl. Do not close the ORY Hydra shell, we will need it soon."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "To make an authorized request, copy the access token you received above and set it as the environment variable "
                                          },
                                          {
                                            "text": "ACCESS_TOKEN",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "."
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "But we are seeing an error message telling us that this request is not allowed. We just encountered access control policies in action."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "0f568251-50f3-4863-91af-9247eef76af5",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ export ACCESS_TOKEN=<paste token from browser>\n$ export ACCESS_TOKEN=fUAvz53...\n\n$ curl \\\n  --insecure \\\n  -H \"Authorization: bearer $ACCESS_TOKEN\" \\\n  https://127.0.0.1:9000/clients/some-consumer\n\n{\"error\":{\"code\":500,\"message\":\"Request was denied by default: The request is not allowed\"}}"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "689ce19e-7b90-4704-8b8f-3bb2c9796113",
                      "cells": [
                        {
                          "id": "84ce1065-36fa-4b92-8363-6b35e1db1f2a",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "While the token is allowed to potentially access this API, the user itself is not! In order to be able to access this API, the user needs to have the permission to access it. The OAuth 2.0 scope is only representative for the Access Token, not the user!"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "ranges": [
                                          {
                                            "text": "Let's allow this user access to the clients API by running "
                                          },
                                          {
                                            "text": "hydra policies create",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": " in the ORY Hydra shell from the previous sections. The user id is set in the exemplary consent app we used and is "
                                          },
                                          {
                                            "text": "user:12345:dandean",
                                            "marks": [
                                              {
                                                "type": "CODE/CODE",
                                                "data": {}
                                              }
                                            ]
                                          },
                                          {
                                            "text": "."
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "55e14f5c-5c08-4e4b-ad3a-683573898fdd",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": " hydra policies create --skip-tls-verify \\\n  --actions get \\\n  --allow \\\n  --id consent-app-policy \\\n  --resources \"rn:hydra:clients:<.*>\" \\\n  --subjects user:12345:dandean"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "5bce550f-0aee-4dcc-ab6e-12256de41848",
                      "cells": [
                        {
                          "id": "c38c22f2-0e2c-42da-9d12-43c320a1ea0e",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Now, re-running the curl command gives the expected result!"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        },
                        {
                          "id": "c5f7c1c3-d93c-4d20-8093-bc1f5217628d",
                          "inline": null,
                          "size": 6,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "CODE/CODE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "$ curl --insecure \\\n  -H \"Authorization: bearer $ACCESS_TOKEN\"\n  https://127.0.0.1:9000/clients/some-consumer\r\n\n{\n  \"id\":\"some-consumer\",\n  \"client_name\":\"\",\n  \"redirect_uris\":[\"http://localhost:9010/callback\"],\n  [...]\n}"
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    },
                    {
                      "id": "ab2cf556-2875-4990-8d37-afe371421551",
                      "cells": [
                        {
                          "id": "ee339d40-2fb7-491c-ac16-c6a06bd11b20",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "That's it, you have a running OAuth2 server with an exemplary identity provider, and performed an OAuth2 request!"
                                      }
                                    ]
                                  },
                                  {
                                    "kind": "block",
                                    "type": "PARAGRAPH/PARAGRAPH",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": ""
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "ORY Hydra"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/ory/hydra"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " is an Apache 2.0 licensed Go server solving OAuth 2.0, OpenID Connect and API security in general. It secures several production systems around the world and has a vibrant and welcoming online community."
                                      }
                                    ]
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "c0bf3bae-345f-42cb-aae5-90c0dbc9dfbf",
              "cells": [
                {
                  "id": "7e78a07c-2738-4440-b75f-f118901ac88a",
                  "inline": null,
                  "size": 12,
                  "layout": {
                    "plugin": {
                      "name": "ory/sites/plugin/layout/section",
                      "version": "0.0.1"
                    },
                    "state": {
                      "flavor": "grey"
                    }
                  },
                  "rows": [
                    {
                      "id": "c9bb6d7c-22eb-4eb2-b9be-3cb435300e97",
                      "cells": [
                        {
                          "id": "d647e9ac-003d-4b63-afed-baf3172b4296",
                          "inline": null,
                          "size": 12,
                          "content": {
                            "plugin": {
                              "name": "ory/editor/core/content/slate",
                              "version": "0.0.1"
                            },
                            "state": {
                              "serialized": {
                                "nodes": [
                                  {
                                    "kind": "block",
                                    "type": "HEADINGS/HEADING-THREE",
                                    "nodes": [
                                      {
                                        "kind": "text",
                                        "text": "Check out "
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "ORY Hydra at Github"
                                          }
                                        ],
                                        "data": {
                                          "href": "https://github.com/ory/hydra"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " and our\n"
                                      },
                                      {
                                        "kind": "inline",
                                        "type": "LINK/LINK",
                                        "nodes": [
                                          {
                                            "kind": "text",
                                            "text": "API Security"
                                          }
                                        ],
                                        "data": {
                                          "href": "products/api-security.html"
                                        }
                                      },
                                      {
                                        "kind": "text",
                                        "text": " products."
                                      }
                                    ],
                                    "data": {
                                      "align": "center"
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  }
}