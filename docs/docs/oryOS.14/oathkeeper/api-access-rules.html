<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>API Access Rules · ORY Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="ORY Oathkeeper decides whether or not access should be allowed with Access"/><meta name="docsearch:version" content="oryOS.14"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="API Access Rules · ORY Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.ory.sh/"/><meta property="og:description" content="ORY Oathkeeper decides whether or not access should be allowed with Access"/><meta property="og:image" content="https://www.ory.sh/images/logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.ory.sh/images/logo.png"/><link rel="shortcut icon" href="/images/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-71865250-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/images/logo.svg" alt="ORY Documentation"/></a><a href="/versions"><h3>oryOS.14</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/" target="_self">Home</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="https://community.ory.sh" target="_self">Forum</a></li><li class=""><a href="/chat" target="_self">Chat</a></li><li class="siteNavGroupActive"><a href="/docs/oryOS.14/" target="_self">Docs</a></li><li class=""><a href="https://github.com/ory/" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Welcome<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/">ORY Developer Documentation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Ecosystem<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/cloud-native">Cloud Native Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/usage">API Usage</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/versioning">Software Versions</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/persistence">Data Storage and Persistence</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/upgrading">Software Updates</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/examples">Learn By Example</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/community">Community</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/ecosystem/sqa">Software Quality Assurance</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORY Hydra<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/">Introduction to ORY Hydra, OAuth 2.0, and OpenID Connect</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/install">Installation</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Getting Started</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/5min-tutorial">5 Minute Tutorial</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/oauth2">Integrating with (existing) User Management</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/configure-deploy">Installation and Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/dependencies-environment">Database Setup and Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/production">Preparing for Production</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/debugging">Debugging</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/advanced">Advanced Topics</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/integration">Consuming OAuth 2.0</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API &amp; SDKs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/sdk/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/sdk/api">REST API</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/sdk/go">Go</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/sdk/js">JavaScript</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Further Reading</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/limitations">Limitations</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/jwks">JSON Web Key Sets</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/security-architecture">Security Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/hydra/faq">FAQ</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORY Oathkeeper<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/oathkeeper/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/oathkeeper/install">Installation</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/oryOS.14/oathkeeper/api-access-rules">API Access Rules</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/oathkeeper/configure-deploy">Configure and Deploy</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/oathkeeper/control-flow">Control Flow</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API &amp; SDKs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/oathkeeper/sdk/api">REST API</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ORY Keto<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/install">Installation</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/configure-deploy">Configure and Deploy</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/secure">Secure</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Control Engines</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/engines/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/engines/acl">Access Control Lists (ACL)</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/engines/rbac">Role Based Access Control (RBAC)</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/engines/acp-ory">ORY Access Control Policies</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/engines/acp-aws">AWS IAM Policies</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API &amp; SDKs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/keto/sdk/api">REST API</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Performance<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/performance/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/oryOS.14/performance/hydra">ORY Hydra</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/ory/docs/edit/master/docs/oathkeeper/api-access-rules.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">API Access Rules</h1></header><article><div><span><p>ORY Oathkeeper decides whether or not access should be allowed with Access
Rules. Access Rules can be managed using the ORY Oathkeeper API.</p>
<h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>An ORY Oathkeeper Access Rule has the following layout:</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {<span class="hljs-comment">/* ... */</span>},
    <span class="hljs-attr">"credentials_issuer"</span>: { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<p>In this case, if a request to <code>http://my-app/some-route</code> is made (this is where
ORY Oathkeeper will listen to), then the rule with ID <code>some-id</code> will be
executed. Then:</p>
<ul>
<li>If the request hits the ORY Oathkeeper proxy (<code>oathkeeper serve proxy</code>): The
request will be forwarded to the upstream URL.</li>
<li>If the request hits the ORY Oathkeeper judge (<code>oathkeeper serve api</code> -&gt;
<code>/judge/some-route</code>): The server will respond with status code 200 if the
request is valid and any other status code if not.</li>
</ul>
<p>The <code>match.url</code> value is capable of parsing regular expressions. Value
<code>http://my-app/some-route</code> will only match this exact URL, not
<code>http://my-app/some-route/foo</code>, <code>http://my-app/some-ROUTE</code>, nor
<code>https://my-app/some-route</code>.</p>
<p>Regular expressions are delimited with <code>&lt;</code> and <code>&gt;</code>. A <code>match.url</code> value of
<code>http://my-app/some-route&lt;.*&gt;</code> will match <code>http://my-app/some-route/foo</code>,
<code>http://my-app/some-route</code>, <code>http://my-app/some-routeABCDEF</code>, and so on. You can
use multiple regular expressions: <code>&lt;http|https&gt;://my-app/some-route&lt;.*&gt;</code>.</p>
<p>The <code>match.methods</code> value defines which HTTP methods this access rule will
match. The rule <code>some-id</code> will, for example, not match POST requests.</p>
<p>ORY Oathkeeper will throw an error if more than one access rule is found for a
given HTTP request. You have to make sure that your access rules don't overlap.</p>
<p>Once an access rule is matched, ORY Oathkeeper will authenticate the
credentials, authorize the request subject (e.g. the user), and transform the
credentials. More on that in the next sections.</p>
<h3><a class="anchor" aria-hidden="true" id="authenticators"></a><a href="#authenticators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authenticators</h3>
<p>An authenticator is responsible for authenticating request credentials. ORY
Oathkeeper supports different authenticators and we will add more as the project
progresses.</p>
<p>An authenticator inspects the HTTP request (e.g. the HTTP Authorization Header)
and executes some business logic that returns true (for authentication ok) or
false (for authentication invalid) as well as a subject ID. The subject ID is
typically the &quot;user&quot; that made the request, but it could also be a machine (if
you have machine-2-machine interaction) or something different.</p>
<p>Each authenticator has the same configuration layout</p>
<pre><code class="hljs"><span class="hljs-string">"authenticators"</span>: [
    {
        <span class="hljs-string">"handler"</span>: <span class="hljs-string">"a"</span>,
        <span class="hljs-string">"config"</span>: {<span class="hljs-comment">/* depends on the authenticator */</span>}
    }
]
</code></pre>
<p>where <code>handler</code> is the name of the authenticator and <code>config</code> is an optional
configuration for that specific authenticator.</p>
<p>You can define more than one authenticator in the access rule. The first
authenticator that is able to handle the credentials will be consulted and other
authenticators will be ignored:</p>
<pre><code class="hljs"><span class="hljs-string">"authenticators"</span>: [
    {
        <span class="hljs-string">"handler"</span>: <span class="hljs-string">"a"</span>
    },
    {
        <span class="hljs-string">"handler"</span>: <span class="hljs-string">"b"</span>
    },
    {
        <span class="hljs-string">"handler"</span>: <span class="hljs-string">"c"</span>
    }
]
</code></pre>
<p>If handler <code>a</code> is able to handle the provided credentials, then handler <code>b</code> and
<code>c</code> will be ignored. If handler <code>a</code> can not handle the provided credentials but
handler <code>b</code> can, then handler <code>a</code> and <code>c</code> will be ignored. Handling the provided
credentials means that the authenticator knows how to handle, for example, the
<code>Authorization: basic</code> header. It does not mean that the credentials are valid!
If a handler encounters invalid credentials, then other handlers will be ignored
too.</p>
<p>Let's take a look at the different supported authenticators!</p>
<h4><a class="anchor" aria-hidden="true" id="noop"></a><a href="#noop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>noop</code></h4>
<p>This is a special authenticator. It tells ORY Oathkeeper to bypass the
authentication process. This also implies that no authorization will be executed
and no credentials will be issued. It's basically a pass-all authenticator that
allows any request to be forwarded to the upstream URL.</p>
<h5><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>The following rule allows all requests to <code>GET http://my-app/some-route</code>:</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [{
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"noop"</span>
    }]
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="anonymous"></a><a href="#anonymous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>anonymous</code></h4>
<p>The <code>anonymous</code> authenticator checks whether or not an <code>Authorization</code> header is
set. If not, it will use the value of the environment variable
<code>AUTHENTICATOR_ANONYMOUS_USERNAME</code> as the subject name.</p>
<h5><a class="anchor" aria-hidden="true" id="example-1"></a><a href="#example-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>The following rule allows all requests to <code>GET http://my-app/some-route</code> and
sets the subject name to the value of the environment variable
<code>AUTHENTICATOR_ANONYMOUS_USERNAME</code>, as long as no <code>Authorization</code> header is set
in the HTTP request:</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [{
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"anonymous"</span>
    }],
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="oauth2_client_credentials"></a><a href="#oauth2_client_credentials" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>oauth2_client_credentials</code></h4>
<p>This <code>oauth2_client_credentials</code> uses the username and password from HTTP Basic
Authorization (<code>Authorization: basic base64(&lt;username:password&gt;)</code> to perform the
OAuth 2.0 Client Credentials grant in order to detect if the provided
credentials are valid.</p>
<p>To use this authenticator, you must provide the environment variable
<code>AUTHENTICATOR_OAUTH2_CLIENT_CREDENTIALS_TOKEN_URL</code> which sets the OAuth 2.0
Token URL that should be used to check if the provided credentials are valid or
not. For example, you could set it as follows:</p>
<pre><code class="hljs">$ <span class="hljs-builtin-name">export</span> <span class="hljs-attribute">AUTHENTICATOR_OAUTH2_CLIENT_CREDENTIALS_TOKEN_URL</span>=https://my-oauth2-server/oauth2/token
</code></pre>
<p>This authenticator will use the username from the HTTP Basic Authorization
header as the subject for this request.</p>
<p>This authenticator has one configuration option which is <code>required_scope</code>. This
option sets what scope is required by the URL and when making performing OAuth
2.0 Client Credentials request, the scope will be included in the request.</p>
<h5><a class="anchor" aria-hidden="true" id="example-2"></a><a href="#example-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>The following rule allows requests to <code>GET http://my-app/some-route</code> if valid a
OAuth 2.0 Client ID and Client Secret has been provided and if that client is
allowed to request scope <code>scope-a</code> and <code>scope-b</code>:</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [{
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"oauth2_client_credentials"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"required_scope"</span>: [<span class="hljs-string">"scope-a"</span>, <span class="hljs-string">"scope-b"</span>]
        }
    }],
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="oauth2_introspection"></a><a href="#oauth2_introspection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>oauth2_introspection</code></h4>
<p>The <code>oauth2_introspection</code> authenticator handles requests that have an Bearer
Token in the Authorization Header (<code>Authorization: bearer &lt;token&gt;</code>). It then
uses OAuth 2.0 Token Introspection to check if the token is valid and if the
token was granted the requested scope.</p>
<p>This authenticator is a bit more complex to set up. You have to define the
following environment variables:</p>
<ul>
<li>Required
<ul>
<li><code>AUTHENTICATOR_OAUTH2_INTROSPECTION_URL</code>: The OAuth 2.0 Token Introspection
URL.</li>
</ul></li>
<li>In cases where the OAuth 2.0 Introspection Endpoint is protected and requires
an OAuth 2.0 Access Token, you can configure ORY Oathkeeper to authorize
before making requests to that endpoint with the following, optional,
settings: _ <code>AUTHENTICATOR_OAUTH2_INTROSPECTION_CLIENT_ID</code>: The OAuth 2.0
Client ID the client that performs the OAuth 2.0 Token Introspection. The
OAuth 2.0 Token Introspection endpoint is typically protected and requires a
valid OAuth 2.0 Client in order to check if a token is valid or not. _
<code>AUTHENTICATOR_OAUTH2_INTROSPECTION_CLIENT_SECRET</code>: The OAuth 2.0 Client
Secret of the client that performs the OAuth 2.0 Token Introspection. _
<code>AUTHENTICATOR_OAUTH2_INTROSPECTION_TOKEN_URL</code>: The OAuth 2.0 Token URL. _
<code>AUTHENTICATOR_OAUTH2_INTROSPECTION_SCOPE</code>: If the OAuth 2.0 Token
Introspection endpoint requires a certain OAuth 2.0 Scope in order to be
accessed, you can set it using this environment variable. Use commas to define
more than one OAuth 2.0 Scope. Example:
<code>AUTHENTICATOR_OAUTH2_INTROSPECTION_SCOPE=scope-a,scope-b</code> *
<code>AUTHENTICATOR_OAUTH2_INTROSPECTION_SCOPE_STRATEGY</code>: The strategy to be used
to validate the scope claim. Strategies <code>HIERARCHIC</code>, <code>EXACT</code>, <code>WILDCARD</code>,
<code>NONE</code> are supported. Defaults to <code>EXACT</code>. For more information on scope
strategies, click <a href="#scope-strategies">here</a>-</li>
</ul>
<h5><a class="anchor" aria-hidden="true" id="example-3"></a><a href="#example-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>The following rule allows requests to <code>GET http://my-app/some-route</code> if valid a
OAuth 2.0 Access Token was provided and if that token was granted OAuth 2.0
Scope <code>scope-a</code> and <code>scope-b</code>:</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [{
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"oauth2_introspection"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"required_scope"</span>: [<span class="hljs-string">"scope-a"</span>, <span class="hljs-string">"scope-b"</span>]
        }
    }],
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="jwt"></a><a href="#jwt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>jwt</code></h4>
<p>The <code>jwt</code> authenticator handles requests that have an Bearer Token in the
Authorization Header (<code>Authorization: bearer &lt;token&gt;</code>). It assumes that the
token is a JSON Web Token and tries to verify the signature of it.</p>
<ul>
<li>Required
<ul>
<li><code>AUTHENTICATOR_JWT_JWKS_URL</code>: The URL where ORY Oathkeeper can retrieve JSON
Web Keys from for validating the JSON Web Token. Usually something like
<code>https://my-keys.com/.well-known/jwks.json</code>. The response of that endpoint
must return a <a href="https://auth0.com/docs/jwks">JSON Web Key Set (JWKS)</a>.</li>
</ul></li>
<li>Optional
<ul>
<li><code>AUTHENTICATOR_JWT_SCOPE_STRATEGY</code>: The strategy to be used to validate the
scope claim. Strategies <code>HIERARCHIC</code>, <code>EXACT</code>, <code>WILDCARD</code>, <code>NONE</code> are
supported. Defaults to <code>EXACT</code>. For more information on scope strategies,
click <a href="#scope-strategies">here</a>-</li>
</ul></li>
</ul>
<p>The following claims can be checked (all case sensitive):</p>
<ul>
<li><code>iss</code>: A string with Issuer Identifier.</li>
<li><code>aud</code>: Either a string (single Audience) or an array of strings.</li>
<li><code>scope</code>: An array of scope strings or space-delimited string of scopes.</li>
</ul>
<h5><a class="anchor" aria-hidden="true" id="example-4"></a><a href="#example-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>The following rule allows requests to <code>GET http://my-app/some-route</code> if valid a
JSON Web Token was provided and if that token has scope <code>scope-a</code> and <code>scope-b</code>,
audience <code>aud-1</code> and was issued by <code>iss-1</code>. All configuration items are optional
and ignored if left out.</p>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [{
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"jwt"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"required_scope"</span>: [<span class="hljs-string">"scope-a"</span>, <span class="hljs-string">"scope-b"</span>],
            <span class="hljs-attr">"target_audience"</span>: [<span class="hljs-string">"aud-1"</span>],
            <span class="hljs-attr">"trusted_issuers"</span>: [<span class="hljs-string">"iss-1"</span>],
        }
    }],
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<p>Per default, this authenticator accepts JSON Web Tokens signed with the <code>RS256</code>
algorithm only. You can change that by whitelisting the algorithms to be
allowed. All common JWT singing algorihtms (except <code>none</code>) are supported:</p>
<pre><code class="hljs">{
    <span class="hljs-comment">/* ... */</span>
    <span class="hljs-attr">"authenticators"</span>: [{
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"jwt"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"allowed_algorithms"</span>: [<span class="hljs-string">"RS256"</span>, <span class="hljs-string">"HS256"</span>, <span class="hljs-string">"RS512"</span>, <span class="hljs-string">"ES256"</span>]
        }
    }],
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="authorizers"></a><a href="#authorizers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authorizers</h3>
<p>The authorizer takes the subject returned from the authenticator and checks if
that subject is allowed to perform the requested action.</p>
<p>Each authorizer has the same configuration layout</p>
<pre><code class="hljs"><span class="hljs-string">"authorizer"</span>: {
    <span class="hljs-string">"handler"</span>: <span class="hljs-string">"a"</span>,
    <span class="hljs-string">"config"</span>: {<span class="hljs-comment">/* depends on the authorizer */</span>}
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="allow"></a><a href="#allow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>allow</code></h4>
<p>This authorizer allows every request to pass.</p>
<h4><a class="anchor" aria-hidden="true" id="example-5"></a><a href="#example-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"allow"</span>
    }
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="deny"></a><a href="#deny" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>deny</code></h4>
<p>This authorizer denies every request.</p>
<h4><a class="anchor" aria-hidden="true" id="example-6"></a><a href="#example-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/some-route"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"deny"</span>
    }
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="keto_engine_acp_ory"></a><a href="#keto_engine_acp_ory" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>keto_engine_acp_ory</code></h4>
<p>This authorizer uses the ORY Keto API to perform access control using
ORY-flavored Access Control Policies. Please familiarize yourself with the ORY
Keto project before you set up this authorizer.</p>
<p>To configure this authorizer, you must set the environment variable
<code>AUTHORIZER_KETO_URL</code> to ORY Keto's URL, for example
<code>AUTHORIZER_KETO_URL=http://keto/</code>. <strong>If this environment variable is not set,
then this authorizer will be disabled.</strong></p>
<p>This authorizer has four configuration options, <code>required_action</code>,
<code>required_resource</code>, <code>subject</code>, and <code>flavor</code>:</p>
<pre><code class="hljs"><span class="hljs-string">"authorizer"</span>: {
    <span class="hljs-string">"handler"</span>: <span class="hljs-string">"keto_engine_acp_ory"</span>,
    <span class="hljs-string">"config"</span>: {
        <span class="hljs-string">"required_action"</span>: <span class="hljs-string">"..."</span>,
        <span class="hljs-string">"required_resource"</span>: <span class="hljs-string">"..."</span>,
        <span class="hljs-string">"subject"</span>: <span class="hljs-string">"..."</span>,
        <span class="hljs-string">"flavor"</span>: <span class="hljs-string">"..."</span>
    }
}
</code></pre>
<p>All configuration options except <code>flavor</code> support variable expansion. Let's say
you have the following match configuration:</p>
<pre><code class="hljs"><span class="hljs-string">"match"</span>: {
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://my-app/api/users/&lt;[0-9]+&gt;/&lt;[a-zA-Z]+&gt;"</span>,
    <span class="hljs-string">"methods"</span>: [<span class="hljs-string">"GET"</span>]
},
</code></pre>
<p>Here, you have two regular expressions, <code>&lt;[0-9]+&gt;</code> and <code>&lt;[a-zA-Z]+&gt;</code>. You can
reference the values matched by the regular expression with <code>$1</code> and <code>$2</code> (and
more generally <code>$n</code>) and they will be substituted before making the request to
ORY Keto:</p>
<pre><code class="hljs"><span class="hljs-string">"config"</span>: {
    <span class="hljs-string">"required_action"</span>: <span class="hljs-string">"my:action:<span class="hljs-variable">$1</span>"</span>,
    <span class="hljs-string">"required_resource"</span>: <span class="hljs-string">"my:resource:<span class="hljs-variable">$2</span>:foo:<span class="hljs-variable">$1</span>"</span>
}
</code></pre>
<p>Assuming a request to <code>http://my-api/api/users/1234/foobar</code> was made, the config
from above would expand to:</p>
<pre><code class="hljs"><span class="hljs-string">"config"</span>: {
    <span class="hljs-string">"required_action"</span>: <span class="hljs-string">"my:action:1234"</span>,
    <span class="hljs-string">"required_resource"</span>: <span class="hljs-string">"my:resource:foobar:foo:1234"</span>
}
</code></pre>
<p>The <code>subject</code> field configures what subject is passed on to the ORY Keto
endpoint. The <code>subject</code> value is a string which will be parsed by the Go
<a href="https://golang.org/pkg/text/template/"><code>text/template</code></a> package for value
substitution, receiving the
<a href="https://github.com/ory/oathkeeper/blob/92c09fb28552949cd034ed5555c87dfda91407a3/proxy/authenticator.go#L19"><code>AuthenticationSession</code></a>
struct:</p>
<pre><code class="hljs css language-go"><span class="hljs-keyword">type</span> AuthenticationSession <span class="hljs-keyword">struct</span> {
    Subject <span class="hljs-keyword">string</span>
    Extra   <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">interface</span>{}
}
</code></pre>
<p>If <code>subject</code> is not specified it will default to
<code>AuthenticationSession.Subject</code>.</p>
<p>Note that the <code>AuthenticationSession</code> struct has a field named <code>Extra</code> which is
a <code>map[string]interface{}</code>, which receives varying introspection data from the
authentication process. Because the contents of <code>Extra</code> are so variable, nested
and potentially non-existent values need special handling by the <code>text/template</code>
parser, and a <code>print</code> FuncMap function has been provided to ensure that
non-existent map values will simply return an empty string, rather than
<code>&lt;no value&gt;</code>.</p>
<p>If you find that your headers contain the string <code>&lt;no value&gt;</code> then you have most
likely omitted the <code>print</code> function, and it is recommended you use it for all
values out of an abundance of caution and for consistency.</p>
<h4><a class="anchor" aria-hidden="true" id="example-7"></a><a href="#example-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/api/users/&lt;[0-9]+&gt;/&lt;[a-zA-Z]+&gt;"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"keto_engine_acp_ory"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"required_action"</span>: <span class="hljs-string">"my:action:$1"</span>,
            <span class="hljs-attr">"required_resource"</span>: <span class="hljs-string">"my:resource:$2:foo:$1"</span>
            <span class="hljs-string">"subject"</span>: <span class="hljs-string">"{{ .Extra.email }}"</span>,
            <span class="hljs-attr">"flavor"</span>: <span class="hljs-string">"exact"</span>
        }
    }
    <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="credentials-issuers"></a><a href="#credentials-issuers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Credentials Issuers</h3>
<p>A credentials issuer translates the credentials from incoming requests to
credentials that your backend understands. For example, the
<code>Authorization: basic</code> header might be transformed to <code>X-User: &lt;subject-id&gt;</code>.
This allows you to write backends that do not care if the original request was
an anonymous one, an OAuth 2.0 Access Token, or some other credential type. All
your backend has to do is understand, for example, the <code>X-User:</code>.</p>
<p>If you access ORY Oathkeeper using the judge endpoint, the header will be
included in the HTTP response.</p>
<h4><a class="anchor" aria-hidden="true" id="noop-1"></a><a href="#noop-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>noop</code></h4>
<p>This credentials issuer does not transform the HTTP request and simply forwards
the headers as-is. This is useful if you don't want to replace, for example,
<code>Authorization: basic</code> with <code>X-User: &lt;subject-id&gt;</code>.</p>
<h5><a class="anchor" aria-hidden="true" id="example-8"></a><a href="#example-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/api/users/&lt;[0-9]+&gt;/&lt;[a-zA-Z]+&gt;"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {<span class="hljs-comment">/* ... */</span> }
    <span class="hljs-string">"credentials_issuer"</span>: {
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"noop"</span>
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="id_token"></a><a href="#id_token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>id_token</code></h4>
<p>This credentials issuer takes the authentication information (e.g. subject ID)
and transforms it to a signed JSON Web Token, and more specifically to an OpenID
Connect ID Token. Your backend can verify the token by fetching the (public) key
from the <code>/.well-known/jwks.json</code> endpoint.</p>
<p>Let's say a request is made to a resource protected by ORY Oathkeeper:</p>
<pre><code class="hljs"><span class="hljs-builtin-name">GET</span> /api<span class="hljs-built_in">/resource </span>HTTP/1.1
Host: www.example.com
Authorization: bearer &lt;opaque-access-token&gt;
</code></pre>
<p>Assuming that ORY Oathkeeper is granting the access request, the
<code>&lt;opaque-access-token&gt;</code> will be replaced with a JSON Web Token that is signed
using the asymmetric RS256 key:</p>
<pre><code class="hljs"><span class="hljs-builtin-name">GET</span> /api<span class="hljs-built_in">/resource </span>HTTP/1.1
Host: internal-api-endpoint-dns
Authorization: bearer &lt;jwt-signed-id-token&gt;
</code></pre>
<p>Now, the protected resource is capable of decoding and validating the JSON Web
Token using the public key supplied by ORY Oathkeeper's API. The public key for
decoding the ID token is available at Oathkeeper's <code>/.well-known/jwks.json</code>
endpoint:</p>
<pre><code class="hljs">http:<span class="hljs-regexp">//</span>oathkeeper:<span class="hljs-number">4456</span><span class="hljs-regexp">/.well-known/</span>jwks.json
</code></pre>
<p>That <code>.well-known/jwks.json</code> endpoint is not served by the ORY Oathkeeper proxy
process, but by the ORY Oathkeeper API process. You will learn more about the
difference between the two in the next chapters.</p>
<p>The related flow diagram looks like this:</p>
<p><img src="/images/docs/oathkeeper/id_token.svg" alt="ID Token Transformation"></p>
<p>Let's say the <code>oauth2_client_credentials</code> authenticator successfully
authenticated the credentials <code>client-id:client-secret</code>. This credentials issuer
will craft an ID Token (JWT) with the following exemplary claims:</p>
<pre><code class="hljs">{
  <span class="hljs-attr">"iss"</span>: <span class="hljs-string">"https://server.example.com"</span>,
  <span class="hljs-attr">"sub"</span>: <span class="hljs-string">"client-id"</span>,
  <span class="hljs-attr">"aud"</span>: <span class="hljs-string">"s6BhdRkqt3"</span>,
  <span class="hljs-attr">"jti"</span>: <span class="hljs-string">"n-0S6_WzA2Mj"</span>,
  <span class="hljs-attr">"exp"</span>: <span class="hljs-number">1311281970</span>,
  <span class="hljs-attr">"iat"</span>: <span class="hljs-number">1311280970</span>,
}
</code></pre>
<p>The ID Token Claims are as follows:</p>
<ul>
<li><code>iss</code>: Issuer Identifier for the Issuer of the response. The iss value is a
case sensitive URL using the https scheme that contains scheme, host, and
optionally, port number and path components and no query or fragment
components. Typically, this is the URL of ORY Oathkeeper, for example:
<code>https://oathkeeper.myapi.com</code>.</li>
<li><code>sub</code>: Subject Identifier. A locally unique and never reassigned identifier
within the Issuer for the End-User, which is intended to be consumed by the
Client, e.g., 24400320 or AItOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4. It must not
exceed 255 ASCII characters in length. The sub value is a case sensitive
string. The End-User might also be an OAuth 2.0 Client, given that the access
token was granted using the OAuth 2.0 Client Credentials flow.</li>
<li><code>aud</code>: Audience(s) that this ID Token is intended for. It MUST contain the
OAuth 2.0 client_id of the Relying Party as an audience value. It MAY also
contain identifiers for other audiences. In the general case, the aud value is
an array of case sensitive strings.</li>
<li><code>exp</code>: Expiration time on or after which the ID Token MUST NOT be accepted for
processing. The processing of this parameter requires that the current
date/time MUST be before the expiration date/time listed in the value. Its
value is a JSON number representing the number of seconds from
1970-01-01T0:0:0Z as measured in UTC until the date/time. See RFC 3339
[RFC3339] for details regarding date/times in general and UTC in particular.</li>
<li><code>iat</code>: Time at which the JWT was issued. Its value is a JSON number
representing the number of seconds from 1970-01-01T0:0:0Z as measured in UTC
until the date/time.</li>
<li><code>jti</code>: A cryptographically strong random identifier to ensure the ID Token's
uniqueness.</li>
</ul>
<p>This credentials issuer implements several token signing algorithms,
specifically:</p>
<ul>
<li><code>HS256</code>: This algorithm uses a HMAC-SHA256 with a shared secret as opposed to
private/public keys. This strategy is not encouraged for production.</li>
<li><code>ORY-HYDRA</code>: This algorithm uses ORY Hydra's JWK management API to generate
private/public RSA keypair. This strategy is encouraged for use in production.</li>
</ul>
<p>You can set the strategy using the <code>CREDENTIALS_ISSUER_ID_TOKEN_ALGORITHM</code>
environment variable. There also two more environment variables which modify the
behaviour of this strategy:</p>
<ul>
<li><code>CREDENTIALS_ISSUER_ID_TOKEN_LIFESPAN</code>: The lifespan of the ID Token which
defaults to 10 minutes. Example: <code>CREDENTIALS_ISSUER_ID_TOKEN_LIFESPAN=1s</code> (1
second), <code>CREDENTIALS_ISSUER_ID_TOKEN_LIFESPAN=1m</code> (1 minute),
<code>CREDENTIALS_ISSUER_ID_TOKEN_LIFESPAN=1h</code> (1 hour),
<code>CREDENTIALS_ISSUER_ID_TOKEN_LIFESPAN=1d</code> (1 day)</li>
<li><code>CREDENTIALS_ISSUER_ID_TOKEN_ISSUER</code>: Who issued the token - this will be the
value of the <code>iss</code> claim in the ID Token.</li>
</ul>
<h5><a class="anchor" aria-hidden="true" id="token-signing-algorithms"></a><a href="#token-signing-algorithms" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Token Signing Algorithms</h5>
<h6><a class="anchor" aria-hidden="true" id="hs256"></a><a href="#hs256" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>HS256</code></h6>
<p>The HS256 algorithm is the default one. This algorithm requires you to set the
secret to be used for signing the ID Token. Be aware that anyone in possession
of this secret - also anyone having access to the <code>./well-known/jwks.json</code> URL
will be able to forge ID Tokens that will be accepted by your backends. We
recommend using this strategy primarily for development purposes.</p>
<p><strong>Do not use this strategy in production unless you know what you are doing.</strong>
If you do use this in production, make sure that <strong>noone</strong> (except the services
validating the tokens) have access to the <code>./well-known/jwks.json</code> URL.</p>
<p>Use must use the <code>CREDENTIALS_ISSUER_ID_TOKEN_HS256_SECRET</code> environment variable
to set the secret.</p>
<h6><a class="anchor" aria-hidden="true" id="ory-hydra"></a><a href="#ory-hydra" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>ORY-HYDRA</code></h6>
<p>This ID Token signing algorithm uses ORY Hydra's JSON Web Key API to generate,
store, and fetch a RSA public/private keypair. When using this algorithm, you
have the following environment variables available:</p>
<ul>
<li>Required
<ul>
<li><code>CREDENTIALS_ISSUER_ID_TOKEN_HYDRA_ADMIN_URL</code>: The URL where the ORY Hydra
Admin API is located.</li>
</ul></li>
<li>Optional
<ul>
<li><code>CREDENTIALS_ISSUER_ID_TOKEN_HYDRA_JWK_SET_ID</code>: The ID to be used to create
&amp; fetch the JSON Web Key from ORY Hydra. Defaults to <code>oathkeeper:id-token</code>.</li>
<li><code>CREDENTIALS_ISSUER_ID_TOKEN_JWK_REFRESH_INTERVAL</code>: ORY Oathkeeper stores
JSON Web Keys for ID Token signing in memory. This value sets the refresh
interval. Default is 5 minutes.</li>
</ul></li>
<li>If this endpoint is protected using OAuth 2.0 Access Tokens, you can configure
ORY Oathkeeper to authorize before calling this endpoint. To do so, configure
the following, optional settings: _ CREDENTIALS<em>ISSUER_ID_TOKEN_HYDRA_CLIENT</em>
The ID of the OAuth 2.0 Client. _
CREDENTIALS*ISSUER_ID_TOKEN_HYDRA_CLIENT_SECRET: The secret of the OAuth 2.0
Client.
<ul>
<li>CREDENTIALS*ISSUER_ID_TOKEN_HYDRA_CLIENT_SCOPES: The OAuth 2.0 Scope the
client should request.</li>
<li>CREDENTIALS_ISSUER_ID_TOKEN_HYDRA_PUBLIC_URL: The public URL where endpoint
/oauth2/token is located.</li>
</ul></li>
</ul>
<h5><a class="anchor" aria-hidden="true" id="access-rule-configuration"></a><a href="#access-rule-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Access Rule Configuration</h5>
<p>Additionally, this credentials issuer allows you to specify the audience of the
ID token per access rule. Setting the audience is optional:</p>
<pre><code class="hljs"><span class="hljs-string">"credentials_issuer"</span>: {
    <span class="hljs-string">"handler"</span>: <span class="hljs-string">"id_token"</span>,
    <span class="hljs-string">"config"</span>: {
        <span class="hljs-string">"aud"</span>: [<span class="hljs-string">"audience-1"</span>, <span class="hljs-string">"audience-2"</span>]
    }
}
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="example-9"></a><a href="#example-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre><code class="hljs">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/api/users/&lt;[0-9]+&gt;/&lt;[a-zA-Z]+&gt;"</span>,
        <span class="hljs-attr">"methods"</span>: [
            <span class="hljs-string">"GET"</span>
        ]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {<span class="hljs-comment">/* ... */</span> }
    <span class="hljs-string">"credentials_issuer"</span>: {
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"id_token"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"aud"</span>: [<span class="hljs-string">"audience-1"</span>, <span class="hljs-string">"audience-2"</span>]
        }
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="headers"></a><a href="#headers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>headers</code></h4>
<p>This credentials issuer will transform the request, allowing you to pass the
credentials to the upstream application via the headers. This will augment, for
example, <code>Authorization: basic</code> with <code>X-User: &lt;subject-id&gt;</code>.</p>
<p>The headers are specified via the <code>headers</code> field of the credentials issuer's
<code>config</code> field. The keys are the header name and the values are a string which
will be parsed by the Go
<a href="https://golang.org/pkg/text/template/"><code>text/template</code></a> package for value
substitution, receiving the
<a href="https://github.com/ory/oathkeeper/blob/92c09fb28552949cd034ed5555c87dfda91407a3/proxy/authenticator.go#L19"><code>AuthenticationSession</code></a>
struct:</p>
<pre><code class="hljs css language-go"><span class="hljs-keyword">type</span> AuthenticationSession <span class="hljs-keyword">struct</span> {
    Subject <span class="hljs-keyword">string</span>
    Extra   <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">interface</span>{}
}
</code></pre>
<p>Note that the <code>AuthenticationSession</code> struct has a field named <code>Extra</code> which is
a <code>map[string]interface{}</code>, which receives varying introspection data from the
authentication process. Because the contents of <code>Extra</code> are so variable, nested
and potentially non-existent values need special handling by the <code>text/template</code>
parser, and a <code>print</code> FuncMap function has been provided to ensure that
non-existent map values will simply return an empty string, rather than
<code>&lt;no value&gt;</code>.</p>
<p>If you find that your headers contain the string <code>&lt;no value&gt;</code> then you have most
likely omitted the <code>print</code> function, and it is recommended you use it for all
values out of an abundance of caution and for consistency.</p>
<h5><a class="anchor" aria-hidden="true" id="example-10"></a><a href="#example-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/api/&lt;.*&gt;"</span>,
        <span class="hljs-attr">"methods"</span>: [<span class="hljs-string">"GET"</span>]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {<span class="hljs-comment">/* ... */</span>}
    <span class="hljs-string">"credentials_issuer"</span> {
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"headers"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"headers"</span>: {
                <span class="hljs-attr">"X-User"</span>: <span class="hljs-string">"{{ print .Subject }}"</span>,
                <span class="hljs-attr">"X-Some-Arbitrary-Data"</span>: <span class="hljs-string">"{{ print .Extra.some.arbitrary.data }}"</span>
            }
        }
    }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="cookies"></a><a href="#cookies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>cookies</code></h4>
<p>This credentials issuer will transform the request, allowing you to pass the
credentials to the upstream application via the cookies.</p>
<p>The cookies are specified via the <code>cookies</code> field of the credentials issuers
<code>config</code> field. The keys are the cookie name and the values are a string which
will be parsed by the Go
<a href="https://golang.org/pkg/text/template/"><code>text/template</code></a> package for value
substitution, receiving the
<a href="https://github.com/ory/oathkeeper/blob/92c09fb28552949cd034ed5555c87dfda91407a3/proxy/authenticator.go#L19">AuthenticationSession</a>
struct:</p>
<pre><code class="hljs css language-go"><span class="hljs-keyword">type</span> AuthenticationSession <span class="hljs-keyword">struct</span> {
    Subject <span class="hljs-keyword">string</span>
    Extra   <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">interface</span>{}
}
</code></pre>
<p>Note that the <code>AuthenticationSession</code> struct has a field name <code>Extra</code> which is a
<code>map[string]interface{}</code>, which receives varying introspection data from the
authentication process. Because the contents of <code>Extra</code> are so variable, nested
and potentially non-existent values need special handling by the <code>text/template</code>
parser, and a <code>print</code> FuncMap function has been provided to ensure the
non-existent map values will simply return an empty string, rather than
<code>&lt;no value&gt;</code>.</p>
<p>If you find that your cookies contain the string <code>&lt;no value&gt;</code> then you have most
likely omitted the <code>print</code> function, and it is recommended you use it for all
values out of an abundance of caution and for consistency.</p>
<h5><a class="anchor" aria-hidden="true" id="example-11"></a><a href="#example-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"some-id"</span>,
    <span class="hljs-attr">"upstream"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-backend-service"</span>
    },
    <span class="hljs-attr">"match"</span>: {
        <span class="hljs-attr">"url"</span>: <span class="hljs-string">"http://my-app/api/&lt;.*&gt;"</span>,
        <span class="hljs-attr">"methods"</span>: [<span class="hljs-string">"GET"</span>]
    },
    <span class="hljs-attr">"authenticators"</span>: [<span class="hljs-comment">/* ... */</span>],
    <span class="hljs-attr">"authorizer"</span>: {<span class="hljs-comment">/* ... */</span>}
    <span class="hljs-string">"credentials_issuer"</span> {
        <span class="hljs-attr">"handler"</span>: <span class="hljs-string">"cookies"</span>,
        <span class="hljs-attr">"config"</span>: {
            <span class="hljs-attr">"cookies"</span>: {
                <span class="hljs-attr">"user"</span>: <span class="hljs-string">"{{ print .Subject }}"</span>,
                <span class="hljs-attr">"some-arbitrary-data"</span>: <span class="hljs-string">"{{ print .Extra.some.arbitrary.data }}"</span>
            }
        }
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="scope-strategies"></a><a href="#scope-strategies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scope Strategies</h2>
<p>The following scope strategies are supported:</p>
<ul>
<li><code>HIERARCHIC</code>: Scope <code>foo</code> matches <code>foo</code>, <code>foo.bar</code>, <code>foo.baz</code> but not <code>bar</code></li>
<li><code>WILDCARD</code>: Scope <code>foo.*</code> matches <code>foo</code>, <code>foo.bar</code>, <code>foo.baz</code> but not <code>bar</code>.
Scope <code>foo</code> matches <code>foo</code> but not <code>foo.bar</code> nor <code>bar</code></li>
<li><code>EXACT</code>: Scope <code>foo</code> matches <code>foo</code> but not <code>bar</code> nor <code>foo.bar</code></li>
<li><code>NONE</code>: Scope validation is disabled completely. It is expected that the
upstream logic (e.g. OAuth 2.0 Token Introspection) handles scope validation
properly. If no upstream logic (e.g. JWT) exists, an error will be thrown if
the scope is to be validated.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="rule-management"></a><a href="#rule-management" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rule Management</h2>
<h3><a class="anchor" aria-hidden="true" id="rules-rest-api"></a><a href="#rules-rest-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rules REST API</h3>
<p>For more information on available fields and exemplary payloads of rules, as
well as rule management using HTTP please refer to the
<a href="https://www.ory.sh/docs/api/oathkeeper/">REST API docs</a></p>
<h3><a class="anchor" aria-hidden="true" id="rules-cli-api"></a><a href="#rules-cli-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rules CLI API</h3>
<p>Management of rules is not only possible through the REST API, but additionally
using the ORY Oathkeeper CLI. For help on how to manage the CLI, type
<code>oathkeeper help rules</code>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 5/17/2019 by hackerman</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/oryOS.14/oathkeeper/install"><span class="arrow-prev">← </span><span>Installation</span></a><a class="docs-next button" href="/docs/oryOS.14/oathkeeper/configure-deploy"><span>Configure and Deploy</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a><ul class="toc-headings"><li><a href="#authenticators">Authenticators</a></li><li><a href="#authorizers">Authorizers</a></li><li><a href="#credentials-issuers">Credentials Issuers</a></li></ul></li><li><a href="#scope-strategies">Scope Strategies</a></li><li><a href="#rule-management">Rule Management</a><ul class="toc-headings"><li><a href="#rules-rest-api">Rules REST API</a></li><li><a href="#rules-cli-api">Rules CLI API</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 ORY GmbH</section><div id="codefund"></div><script src="https://codefund.io/properties/140/funder.js" async=""></script><script>(function () {
  document.querySelectorAll('.tabs .tabs-nav .nav-item a').forEach(function (t) {
    t.addEventListener("click", function (e) {
      e.preventDefault();

      t.closest('.tabs-nav').querySelectorAll('.nav-item a').forEach(function (i) {
        i.classList.remove('active');
      });

      t.closest('.tabs').querySelectorAll('.tab-content .tab-pane').forEach(function (i) {
        i.classList.remove('active');
      });

      t.classList.add('active');
      document.getElementById(t.href.split('#')[1]).classList.add('active');
      return false
    });
  });
})();</script></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8463c6ece843b377565726bb4ed325b0',
                indexName: 'ory',
                inputSelector: '#search_input_react'
              });
            </script></body></html>