<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cloud Native Architecture · ORY Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="All ORY technology is built cloud native and follows"/><meta name="docsearch:version" content="oryOS.15"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Cloud Native Architecture · ORY Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.ory.sh/"/><meta property="og:description" content="All ORY technology is built cloud native and follows"/><meta property="og:image" content="https://www.ory.sh/images/logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.ory.sh/images/logo.png"/><link rel="shortcut icon" href="/images/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-71865250-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/images/logo.svg" alt="ORY Documentation"/></a><a href="/versions"><h3>oryOS.15</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/" target="_self">Home</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="https://community.ory.sh" target="_self">Forum</a></li><li class=""><a href="/chat" target="_self">Chat</a></li><li class=""><a href="/docs/oryOS.15/" target="_self">Docs</a></li><li class=""><a href="https://github.com/ory/" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/ory/docs/edit/master/docs/ecosystem/cloud-native.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Cloud Native Architecture</h1></header><article><div><span><p>All ORY technology is built cloud native and follows
<a href="https://www.12factor.net">12factor.net</a> principles.</p>
<h2><a class="anchor" aria-hidden="true" id="12-factor-concepts"></a><a href="#12-factor-concepts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>12 Factor Concepts</h2>
<p>The following is a collection of core concepts to ORY's technological ideology.
They are summaries of the <a href="https://www.12factor.net">12factor principles</a>
written by Adam Wiggins.</p>
<h3><a class="anchor" aria-hidden="true" id="codebase-one-codebase-tracked-in-revision-control-many-deploys"></a><a href="#codebase-one-codebase-tracked-in-revision-control-many-deploys" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Codebase: One codebase tracked in revision control, many deploys</h3>
<p>A twelve-factor app is always tracked in a version control system, such as Git,
Mercurial, or Subversion. A copy of the revision tracking database is known as a
code repository, often shortened to code repo or just repo.</p>
<p>A codebase is any single repo (in a centralized revision control system like
Subversion), or any set of repos who share a root commit (in a decentralized
revision control system like Git).</p>
<h3><a class="anchor" aria-hidden="true" id="dependencies-explicitly-declare-and-isolate-dependencies"></a><a href="#dependencies-explicitly-declare-and-isolate-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependencies: Explicitly declare and isolate dependencies</h3>
<p>A twelve-factor app never relies on implicit existence of system-wide packages.
It declares all dependencies, completely and exactly, via a dependency
declaration manifest. Furthermore, it uses a dependency isolation tool during
execution to ensure that no implicit dependencies “leak in” from the surrounding
system. The full and explicit dependency specification is applied uniformly to
both production and development.</p>
<h3><a class="anchor" aria-hidden="true" id="config-store-config-in-the-environment"></a><a href="#config-store-config-in-the-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Config: Store config in the environment</h3>
<p>The twelve-factor app stores config in environment variables (often shortened to
env vars or env). Env vars are easy to change between deploys without changing
any code; unlike config files, there is little chance of them being checked into
the code repo accidentally; and unlike custom config files, or other config
mechanisms such as Java System Properties, they are a language- and OS-agnostic
standard.</p>
<h3><a class="anchor" aria-hidden="true" id="backing-services-treat-backing-services-as-attached-resources"></a><a href="#backing-services-treat-backing-services-as-attached-resources" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Backing services: Treat backing services as attached resources</h3>
<p>A backing service is any service the app consumes over the network as part of
its normal operation. Examples include datastores (such as MySQL or CouchDB),
messaging/queueing systems (such as RabbitMQ or Beanstalkd), SMTP services for
outbound email (such as Postfix), and caching systems (such as Memcached).</p>
<p>The code for a twelve-factor app makes no distinction between local and third
party services. To the app, both are attached resources, accessed via a URL or
other locator/credentials stored in the config. A deploy of the twelve-factor
app should be able to swap out a local MySQL database with one managed by a
third party (such as Amazon RDS) without any changes to the app’s code.
Likewise, a local SMTP server could be swapped with a third-party SMTP service
(such as Postmark) without code changes. In both cases, only the resource handle
in the config needs to change.</p>
<h3><a class="anchor" aria-hidden="true" id="build-release-run-strictly-separate-build-and-run-stages"></a><a href="#build-release-run-strictly-separate-build-and-run-stages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build, release, run: Strictly separate build and run stages</h3>
<p>The twelve-factor app uses strict separation between the build, release, and run
stages. For example, it is impossible to make changes to the code at runtime,
since there is no way to propagate those changes back to the build stage.</p>
<h3><a class="anchor" aria-hidden="true" id="processes-execute-the-app-as-one-or-more-stateless-processes"></a><a href="#processes-execute-the-app-as-one-or-more-stateless-processes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Processes: Execute the app as one or more stateless processes</h3>
<p>Twelve-factor processes are stateless and share-nothing. Any data that needs to
persist must be stored in a stateful backing service, typically a database.</p>
<h3><a class="anchor" aria-hidden="true" id="port-binding-export-services-via-port-binding"></a><a href="#port-binding-export-services-via-port-binding" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Port binding: Export services via port binding</h3>
<p>The twelve-factor app is completely self-contained and does not rely on runtime
injection of a webserver into the execution environment to create a web-facing
service. The web app exports HTTP as a service by binding to a port, and
listening to requests coming in on that port.</p>
<h3><a class="anchor" aria-hidden="true" id="concurrency-scale-out-via-the-process-model"></a><a href="#concurrency-scale-out-via-the-process-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Concurrency: Scale out via the process model</h3>
<p>In the twelve-factor app, processes are a first class citizen. Processes in the
twelve-factor app take strong cues from the unix process model for running
service daemons. Using this model, the developer can architect their app to
handle diverse workloads by assigning each type of work to a process type. For
example, HTTP requests may be handled by a web process, and long-running
background tasks handled by a worker process.</p>
<h3><a class="anchor" aria-hidden="true" id="disposability-maximize-robustness-with-fast-startup-and-graceful-shutdown"></a><a href="#disposability-maximize-robustness-with-fast-startup-and-graceful-shutdown" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disposability: Maximize robustness with fast startup and graceful shutdown</h3>
<p>The twelve-factor app’s processes are disposable, meaning they can be started or
stopped at a moment’s notice. This facilitates fast elastic scaling, rapid
deployment of code or config changes, and robustness of production deploys.</p>
<p>Processes should strive to minimize startup time. Ideally, a process takes a few
seconds from the time the launch command is executed until the process is up and
ready to receive requests or jobs. Short startup time provides more agility for
the release process and scaling up; and it aids robustness, because the process
manager can more easily move processes to new physical machines when warranted.</p>
<p>Processes shut down gracefully when they receive a SIGTERM signal from the
process manager. For a web process, graceful shutdown is achieved by ceasing to
listen on the service port (thereby refusing any new requests), allowing any
current requests to finish, and then exiting. Implicit in this model is that
HTTP requests are short (no more than a few seconds), or in the case of long
polling, the client should seamlessly attempt to reconnect when the connection
is lost.</p>
<h3><a class="anchor" aria-hidden="true" id="admin-processes-run-adminmanagement-tasks-as-one-off-processes"></a><a href="#admin-processes-run-adminmanagement-tasks-as-one-off-processes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Admin processes: Run admin/management tasks as one-off processes</h3>
<p>The process formation is the array of processes that are used to do the app’s
regular business (such as handling web requests) as it runs. Separately,
developers will often wish to do one-off administrative or maintenance tasks for
the app, such as running database migrations (e.g. <code>hydra migrate sql</code>).</p>
<p>One-off admin processes should be run in an identical environment as the regular
long-running processes of the app. They run against a release, using the same
codebase and config as any process run against that release. Admin code must
ship with application code to avoid synchronization issues.</p>
<h3><a class="anchor" aria-hidden="true" id="logs-treat-logs-as-event-streams"></a><a href="#logs-treat-logs-as-event-streams" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Logs: Treat logs as event streams</h3>
<p>A twelve-factor app never concerns itself with routing or storage of its output
stream. It should not attempt to write to or manage logfiles. Instead, each
running process writes its event stream, unbuffered, to stdout. During local
development, the developer will view this stream in the foreground of their
terminal to observe the app’s behavior.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 5/17/2019 by hackerman</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#12-factor-concepts">12 Factor Concepts</a><ul class="toc-headings"><li><a href="#codebase-one-codebase-tracked-in-revision-control-many-deploys">Codebase: One codebase tracked in revision control, many deploys</a></li><li><a href="#dependencies-explicitly-declare-and-isolate-dependencies">Dependencies: Explicitly declare and isolate dependencies</a></li><li><a href="#config-store-config-in-the-environment">Config: Store config in the environment</a></li><li><a href="#backing-services-treat-backing-services-as-attached-resources">Backing services: Treat backing services as attached resources</a></li><li><a href="#build-release-run-strictly-separate-build-and-run-stages">Build, release, run: Strictly separate build and run stages</a></li><li><a href="#processes-execute-the-app-as-one-or-more-stateless-processes">Processes: Execute the app as one or more stateless processes</a></li><li><a href="#port-binding-export-services-via-port-binding">Port binding: Export services via port binding</a></li><li><a href="#concurrency-scale-out-via-the-process-model">Concurrency: Scale out via the process model</a></li><li><a href="#disposability-maximize-robustness-with-fast-startup-and-graceful-shutdown">Disposability: Maximize robustness with fast startup and graceful shutdown</a></li><li><a href="#admin-processes-run-adminmanagement-tasks-as-one-off-processes">Admin processes: Run admin/management tasks as one-off processes</a></li><li><a href="#logs-treat-logs-as-event-streams">Logs: Treat logs as event streams</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 ORY GmbH</section><div id="codefund"></div><script src="https://codefund.io/properties/140/funder.js" async=""></script><script>(function () {
  document.querySelectorAll('.tabs .tabs-nav .nav-item a').forEach(function (t) {
    t.addEventListener("click", function (e) {
      e.preventDefault();

      t.closest('.tabs-nav').querySelectorAll('.nav-item a').forEach(function (i) {
        i.classList.remove('active');
      });

      t.closest('.tabs').querySelectorAll('.tab-content .tab-pane').forEach(function (i) {
        i.classList.remove('active');
      });

      t.classList.add('active');
      document.getElementById(t.href.split('#')[1]).classList.add('active');
      return false
    });
  });
})();</script></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8463c6ece843b377565726bb4ed325b0',
                indexName: 'ory',
                inputSelector: '#search_input_react'
              });
            </script></body></html>