<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>FAQ · ORY Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This file keeps track of questions and discussions from Gitter and general help"/><meta name="docsearch:version" content="oryOS.15"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="FAQ · ORY Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.ory.sh/"/><meta property="og:description" content="This file keeps track of questions and discussions from Gitter and general help"/><meta property="og:image" content="https://www.ory.sh/images/logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.ory.sh/images/logo.png"/><link rel="shortcut icon" href="/images/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-71865250-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/images/logo.svg" alt="ORY Documentation"/></a><a href="/versions"><h3>oryOS.15</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/" target="_self">Home</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="https://community.ory.sh" target="_self">Forum</a></li><li class=""><a href="/chat" target="_self">Chat</a></li><li class="siteNavGroupActive"><a href="/docs/" target="_self">Docs</a></li><li class=""><a href="https://github.com/ory/" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Further Reading</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Welcome</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/">ORY Developer Documentation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Ecosystem</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/ecosystem/projects">Projects</a></li><li class="navListItem"><a class="navItem" href="/docs/ecosystem/software-architecture-philosophy">Software Architecture and Philosophy</a></li><li class="navListItem"><a class="navItem" href="/docs/ecosystem/deployment">Deployment Fundamentals and Requirements</a></li><li class="navListItem"><a class="navItem" href="/docs/ecosystem/versioning">Software Versions and Project Maturity</a></li><li class="navListItem"><a class="navItem" href="/docs/ecosystem/upgrading">Software Updates</a></li><li class="navListItem"><a class="navItem" href="/docs/ecosystem/api-design">API Design</a></li><li class="navListItem"><a class="navItem" href="/docs/ecosystem/community">Community</a></li><li class="navListItem"><a class="navItem" href="/docs/ecosystem/sqa">Software Quality Assurance</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">ORY Hydra</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/hydra/">Introduction</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Concepts</h4><ul><li class="navListItem"><a class="navItem" href="/docs/hydra/oauth2">OAuth 2.0</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/login-consent-flow">Hydra workflow</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Integrating Hydra into your stack</h4><ul><li class="navListItem"><a class="navItem" href="/docs/hydra/5min-tutorial">5 Minute Tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/implementing-consent">Login, Consent &amp; Logout</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/case-study">OAuth 2.0 Case Study</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/hydra/configure-deploy">Installation and Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/dependencies-environment">Database Setup and Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/production">Preparing for Production</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/debugging">Debugging</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/advanced">Advanced Topics</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/integration">Consuming OAuth 2.0</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API &amp; SDKs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/hydra/sdk/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/sdk/api">REST API</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/sdk/go">Go</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/sdk/js">JavaScript</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/sdk/php">PHP</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Further Reading</h4><ul><li class="navListItem"><a class="navItem" href="/docs/hydra/limitations">Limitations</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/jwks">JSON Web Key Sets</a></li><li class="navListItem"><a class="navItem" href="/docs/hydra/security-architecture">Security Architecture</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/hydra/faq">FAQ</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">ORY Oathkeeper</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/install">Installation</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Core Concepts</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/api-access-rules">API Access Rules</a></li><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/pipeline/authn">Authenticators</a></li><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/pipeline/authz">Authorizers</a></li><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/pipeline/mutator">Mutators</a></li><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/pipeline/error">Error Handlers</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/configure-deploy">Configure and Deploy</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API &amp; SDKs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/sdk/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/oathkeeper/sdk/api">REST API</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">ORY Keto</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/keto/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/install">Installation</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/keto/configure-deploy">Configure and Deploy</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/secure">Secure</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Control Engines</h4><ul><li class="navListItem"><a class="navItem" href="/docs/keto/engines/">Access Control Engines - Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/engines/acl">Access Control Lists (ACL)</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/engines/rbac">Role Based Access Control (RBAC)</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/engines/acp-ory">ORY Access Control Policies</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/engines/acp-aws">AWS IAM Policies</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API &amp; SDKs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/keto/sdk/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/keto/sdk/api">REST API</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Performance</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/performance/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/performance/hydra">ORY Hydra</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/ory/docs/edit/master/docs/hydra/faq.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">FAQ</h1></header><article><div><span><p>This file keeps track of questions and discussions from Gitter and general help
with various issues.</p>
<p><strong>Please be aware that some things noted here might be highly outdated. If you
find an outdated section, please create a PR which removes or updates it!</strong></p>
<!-- toc -->
<h2><a class="anchor" aria-hidden="true" id="how-can-i-control-sql-connection-limits"></a><a href="#how-can-i-control-sql-connection-limits" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How can I control SQL connection limits?</h2>
<p>You can configure SQL connection limits by appending parameters <code>max_conns</code>,
<code>max_idle_conns</code>, or <code>max_conn_lifetime</code> to the DSN:
<code>postgres://foo:bar@host:port/database?max_conns=12</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="why-is-the-resource-owner-password-credentials-grant-not-supported"></a><a href="#why-is-the-resource-owner-password-credentials-grant-not-supported" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why is the Resource Owner Password Credentials grant not supported?</h2>
<p>The following is a copy of the original
<a href="https://github.com/ory/hydra/pull/297#issuecomment-294282671">comment on GitHub</a>:</p>
<p>I took a long time for this issue, primarily because I felt very uncomfortable
implementing it. The ROCP grant is something from the &quot;dark ages&quot; of OAuth2 and
there are suitable replacements for mobile clients, such as public oauth2
clients, which are supported by Hydra:
<a href="https://tools.ietf.org/html/draft-ietf-oauth-native-apps-09">https://tools.ietf.org/html/draft-ietf-oauth-native-apps-09</a></p>
<p>The OAuth2 Thread Model explicitly states that the ROPC grant is commonly used
in legacy/migration scenarios, and</p>
<blockquote>
<p>This grant type has higher risk because it maintains the UID/password
anti-pattern. Additionally, because the user does not have control over the
authorization process, clients using this grant type are not limited by scope
but instead have potentially the same capabilities as the user themselves. As
there is no authorization step, the ability to offer token revocation is
bypassed.</p>
</blockquote>
<blockquote>
<p>Because passwords are often used for more than 1 service, this anti-pattern
may also put at risk whatever else is accessible with the supplied credential.
Additionally, any easily derived equivalent (e.g., <a href="mailto:joe@example.com">joe@example.com</a> and
<a href="mailto:joe@example.net">joe@example.net</a>) might easily allow someone to guess that the same password
can be used elsewhere.</p>
</blockquote>
<blockquote>
<p>Impact: The resource server can only differentiate scope based on the access
token being associated with a particular client. The client could also acquire
long-lived tokens and pass them up to an attacker's web service for further
abuse. The client, eavesdroppers, or endpoints could eavesdrop the user id and
password.</p>
</blockquote>
<blockquote>
<p>o Except for migration reasons, minimize use of this grant type.</p>
</blockquote>
<ul>
<li><a href="https://tools.ietf.org/html/rfc6819#section-4.4.3">source</a></li>
</ul>
<p>Thus, I decided to not implement the ROPC grant in Hydra. Over time, I will add
documentation how to deal with mobile scenarios and similar.</p>
<h2><a class="anchor" aria-hidden="true" id="should-i-use-oauth2-tokens-for-authentication"></a><a href="#should-i-use-oauth2-tokens-for-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Should I use OAuth2 tokens for authentication?</h2>
<p>OAuth2 tokens are like money. It allows you to buy stuff, but the cashier does
not really care if the money is yours or if you stole it, as long as it's valid
money. Depending on what you understand as authentication, this is a yes and no
answer:</p>
<ul>
<li><strong>Yes:</strong> You can use access tokens to find out which user (&quot;subject&quot;) is
performing an action in a resource provider (blog article service, shopping
basket, ...). Coming back to the money example: <em>You</em>, the subject, receives a
cappuccino from the vendor (resource provider) in exchange for money (access
token).</li>
<li><strong>No:</strong> Never use access tokens for logging people in, for example
<code>http://myapp.com/login?access_token=...</code>. Coming back to the money example:
The police officer (&quot;authentication server&quot;) will not accept money (&quot;access
token&quot;) as a proof of identity (&quot;it's really you&quot;). Unless he is corrupt
(&quot;vulnerable&quot;), of course.</li>
</ul>
<p>In the second example (&quot;authentication server&quot;), you must use OpenID Connect ID
Tokens.</p>
<h2><a class="anchor" aria-hidden="true" id="how-to-deal-with-mobile-apps"></a><a href="#how-to-deal-with-mobile-apps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to deal with mobile apps?</h2>
<p>Read <a href="https://www.ory.sh/oauth2-for-mobile-app-spa-browser">this article</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="how-should-i-run-migrations"></a><a href="#how-should-i-run-migrations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How should I run migrations?</h2>
<p>Since ORY Hydra 0.8.0, migrations are no longer run automatically on boot. This
is required in production environments, because:</p>
<ol>
<li>Although SQL migrations are tested, migrating schemas can cause data loss and
should only be done consciously with prior back ups.</li>
<li>Running a production system with a user that has right such as ALTER TABLE is
a security anti-pattern.</li>
</ol>
<p>Thus, to initialize the database schemas, it is required to run
<code>hydra migrate sql driver://user:password@host:port/db</code> before running
<code>hydra host</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="what-does-the-installation-process-look-like"></a><a href="#what-does-the-installation-process-look-like" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What does the installation process look like?</h2>
<ol>
<li>Run <code>hydra migrate sql ...</code> on a host close to the database (e.g. a virtual
machine with access to the SQL instance).</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="what-does-a-migration-process-look-like"></a><a href="#what-does-a-migration-process-look-like" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What does a migration process look like?</h2>
<ol>
<li>Make sure a database update is required by checking the release notes.</li>
<li>Make a back up of the database.</li>
<li>Run the migration script on a host close to the database (e.g. a virtual
machine with access to the SQL instance). Schemas are usually backwards
compatible, so instances running previous versions of ORY Hydra should keep
working fine. If backwards compatibility is not given, this will be addressed
in the patch notes.</li>
<li>Upgrade all ORY Hydra instances.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="how-can-i-do-this-in-docker"></a><a href="#how-can-i-do-this-in-docker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How can I do this in docker?</h2>
<p>Many deployments of ORY Hydra use Docker. Although several options are
available, we advise to extend the ORY Hydra Docker image</p>
<p><strong>Dockerfile</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">FROM</span> oryd/hydra:&lt;tag&gt;

<span class="hljs-keyword">ENTRYPOINT</span><span class="bash"> hydra migrate sql --yes <span class="hljs-variable">$DATABASE_URL</span></span>
</code></pre>
<p>and run it in your infrastructure once.</p>
<p>Additionally, <em>but not recommended</em>, it is possible to override the entry point
of the ORY Hydra Docker image using CLI flag
<code>--entrypoint &quot;hydra migrate sql --yes $DATABASE_URL; hydra host&quot;</code> or with
<code>entrypoint: hydra migrate sql $DATABASE_URL; hydra host</code> set in your docker
compose config.</p>
<h2><a class="anchor" aria-hidden="true" id="can-i-set-the-log-level-to-warn-error-debug-"></a><a href="#can-i-set-the-log-level-to-warn-error-debug-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Can I set the log level to warn, error, debug, ...?</h2>
<p>Yes, you can do so by setting the environment variable <code>LOG_LEVEL=&lt;level&gt;</code>.
There are various levels supported:</p>
<ul>
<li>debug</li>
<li>info</li>
<li>warn</li>
<li>error</li>
<li>fatal</li>
<li>panic</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="how-can-i-import-tls-certificates"></a><a href="#how-can-i-import-tls-certificates" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How can I import TLS certificates?</h2>
<p>You can import TLS certificates when running <code>hydra host</code>. This can be done by
setting the following environment variables:</p>
<p><strong>Read from file</strong></p>
<ul>
<li><code>HTTPS_TLS_CERT_PATH</code>: The path to the TLS certificate (pem encoded).</li>
<li><code>HTTPS_TLS_KEY_PATH</code>: The path to the TLS private key (pem encoded).</li>
</ul>
<p><strong>Embedded</strong></p>
<ul>
<li><code>HTTPS_TLS_CERT</code>: A pem encoded TLS certificate passed as string. Can be used
instead of TLS_CERT_PATH.</li>
<li><code>HTTPS_TLS_KEY</code>: A pem encoded TLS key passed as string. Can be used instead
of TLS_KEY_PATH.</li>
</ul>
<p>Or by specifying the following flags:</p>
<pre><code class="hljs">--https-tls-cert-path <span class="hljs-keyword">string</span>   Path <span class="hljs-keyword">to</span> the certificate <span class="hljs-keyword">file</span> <span class="hljs-keyword">for</span> HTTP/<span class="hljs-number">2</span> over TLS (https). You can <span class="hljs-keyword">set</span> HTTPS_TLS_KEY_PATH <span class="hljs-keyword">or</span> HTTPS_TLS_KEY instead.
--https-tls-key-path <span class="hljs-keyword">string</span>    Path <span class="hljs-keyword">to</span> the key <span class="hljs-keyword">file</span> <span class="hljs-keyword">for</span> HTTP/<span class="hljs-number">2</span> over TLS (https). You can <span class="hljs-keyword">set</span> HTTPS_TLS_KEY_PATH <span class="hljs-keyword">or</span> HTTPS_TLS_KEY instead.
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="is-there-an-http-api-documentation"></a><a href="#is-there-an-http-api-documentation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Is there an HTTP API Documentation?</h2>
<p><a href="https://www.ory.sh/docs/api/hydra">Yes</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="how-can-i-disable-https-for-testing"></a><a href="#how-can-i-disable-https-for-testing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How can I disable HTTPS for testing?</h2>
<p>You can do so by running <code>hydra host --dangerous-force-http</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="mysql-gives-unsupported-scan-storing-drivervalue-type-uint8-into-type-timetime"></a><a href="#mysql-gives-unsupported-scan-storing-drivervalue-type-uint8-into-type-timetime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MySQL gives <code>unsupported Scan, storing driver.Value type []uint8 into type *time.Time</code></h2>
<blockquote>
<p>did a quick test to get mysql running, but run into migrate sql issue - seems
mysql related An error occurred while running the migrations: Could not apply
ladon SQL migrations: Could not migrate sql schema, applied 0 migrations: sql:
Scan error on column index 0: unsupported Scan, storing driver.Value type
[]uint8 into type *time.Time is this a known bug ? or any specific mysql
version which is required (running 5.7) ?</p>
</blockquote>
<pre><code class="hljs">$ hydra <span class="hljs-keyword">help</span> host
...
   - MySQL: <span class="hljs-keyword">If</span> DATABASE_URL <span class="hljs-keyword">is</span> a DSN <span class="hljs-keyword">starting</span> <span class="hljs-keyword">with</span> mysql:// MySQL will be used <span class="hljs-keyword">as</span> <span class="hljs-keyword">storage</span> backend.
        Example: DATABASE_URL=mysql://<span class="hljs-keyword">user</span>:<span class="hljs-keyword">password</span>@tcp(host:<span class="hljs-number">123</span>)/<span class="hljs-keyword">database</span>?parseTime=<span class="hljs-literal">true</span>

        Be aware that the ?parseTime=<span class="hljs-literal">true</span> parameter <span class="hljs-keyword">is</span> mandatory, <span class="hljs-keyword">or</span> timestamps will <span class="hljs-keyword">not</span> work.
...
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="the-docker-image-exits-immediately"></a><a href="#the-docker-image-exits-immediately" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The docker image exits immediately</h2>
<p>Check the logs using <code>docker logs &lt;container-id&gt;</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="insufficient-entropy"></a><a href="#insufficient-entropy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Insufficient Entropy</h2>
<blockquote>
<p>Hey there , I am getting this error when I try request an access token &quot;The
request used a security parameter (e.g., anti-replay, anti-csrf) with
insufficient entropy (minimum of 8 characters)&quot;</p>
</blockquote>
<blockquote>
<p>Kareem Diaa @kimooz Jun 07 16:41<br>
Hey there , I am getting this error when I try request an access token &quot;The
request used a security parameter (e.g., anti-replay, anti-csrf) with
insufficient entropy (minimum of 8 characters)&quot;</p>
</blockquote>
<blockquote>
<p>Aeneas @arekkas Jun 07 16:41<br>
@kimooz make sure state and nonce are set in your auth code url
(<a href="http://hydra/oauth2/auth?client_id=...&amp;nonce=THIS_NEEDS_TO_BE_SET&amp;state=THIS_ALSO_NEEDS_TO_BE_SET">http://hydra/oauth2/auth?client_id=...&amp;nonce=THIS_NEEDS_TO_BE_SET&amp;state=THIS_ALSO_NEEDS_TO_BE_SET</a></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="i-get-compile-errors"></a><a href="#i-get-compile-errors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I get compile errors!</h2>
<blockquote>
<p>I would try deleting the vendor dir and glide’s files and try glide init again
or clear Glide’s global cache.</p>
</blockquote>
<blockquote>
<p>follow the steps in the readme
<a href="https://github.com/ory/hydra#building-from-source">https://github.com/ory/hydra#building-from-source</a></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="refreshing-tokens"></a><a href="#refreshing-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refreshing tokens</h2>
<blockquote>
<p>Kareem Diaa @kimooz 15:48<br>
One last question if you don't mind from your experience do you think that
saving the user access token in a session and validating it from the client on
ever refresh does that make sense or not? using the introspect endpoint</p>
</blockquote>
<blockquote>
<p>Aeneas @arekkas 15:51<br>
nah, simply write your http calls in a way that if a 401 or 403 occurs, the
token is refreshed that's the easiest and cleanest</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="hydra-wont-remember-my-login"></a><a href="#hydra-wont-remember-my-login" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hydra won't remember my login</h2>
<p>Hydra only keeps track of the session if you set the <code>remember_me</code> parameter in
the <code>accept login request</code>. Otherwise the login challenge will always instruct
you to show the login UI.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/hydra/security-architecture"><span class="arrow-prev">← </span><span>Security Architecture</span></a><a class="docs-next button" href="/docs/oathkeeper/index"><span>Introduction</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#how-can-i-control-sql-connection-limits">How can I control SQL connection limits?</a></li><li><a href="#why-is-the-resource-owner-password-credentials-grant-not-supported">Why is the Resource Owner Password Credentials grant not supported?</a></li><li><a href="#should-i-use-oauth2-tokens-for-authentication">Should I use OAuth2 tokens for authentication?</a></li><li><a href="#how-to-deal-with-mobile-apps">How to deal with mobile apps?</a></li><li><a href="#how-should-i-run-migrations">How should I run migrations?</a></li><li><a href="#what-does-the-installation-process-look-like">What does the installation process look like?</a></li><li><a href="#what-does-a-migration-process-look-like">What does a migration process look like?</a></li><li><a href="#how-can-i-do-this-in-docker">How can I do this in docker?</a></li><li><a href="#can-i-set-the-log-level-to-warn-error-debug-">Can I set the log level to warn, error, debug, ...?</a></li><li><a href="#how-can-i-import-tls-certificates">How can I import TLS certificates?</a></li><li><a href="#is-there-an-http-api-documentation">Is there an HTTP API Documentation?</a></li><li><a href="#how-can-i-disable-https-for-testing">How can I disable HTTPS for testing?</a></li><li><a href="#mysql-gives-unsupported-scan-storing-drivervalue-type-uint8-into-type-timetime">MySQL gives <code>unsupported Scan, storing driver.Value type []uint8 into type *time.Time</code></a></li><li><a href="#the-docker-image-exits-immediately">The docker image exits immediately</a></li><li><a href="#insufficient-entropy">Insufficient Entropy</a></li><li><a href="#i-get-compile-errors">I get compile errors!</a></li><li><a href="#refreshing-tokens">Refreshing tokens</a></li><li><a href="#hydra-wont-remember-my-login">Hydra won't remember my login</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 ORY GmbH</section><div id="codefund"></div><script src="https://codefund.io/properties/140/funder.js" async=""></script><script>(function () {
  document.querySelectorAll('.tabs .tabs-nav .nav-item a').forEach(function (t) {
    t.addEventListener("click", function (e) {
      e.preventDefault();

      t.closest('.tabs-nav').querySelectorAll('.nav-item a').forEach(function (i) {
        i.classList.remove('active');
      });

      t.closest('.tabs').querySelectorAll('.tab-content .tab-pane').forEach(function (i) {
        i.classList.remove('active');
      });

      t.classList.add('active');
      document.getElementById(t.href.split('#')[1]).classList.add('active');
      return false
    });
  });
})();</script></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8463c6ece843b377565726bb4ed325b0',
                indexName: 'ory',
                inputSelector: '#search_input_react'
              });
            </script></body></html>