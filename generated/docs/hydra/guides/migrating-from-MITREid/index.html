<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-71865250-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="ORY Hydra" href="/hydra/docs/opensearch.xml"><title data-react-helmet="true">Migrating from MITREid | ORY Hydra</title><meta data-react-helmet="true" name="docsearch:version" content="v1.9,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Migrating from MITREid | ORY Hydra"><meta data-react-helmet="true" name="description" content="Please note this page doesn&#x27;t pretend to be a step-by-step guide."><meta data-react-helmet="true" property="og:description" content="Please note this page doesn&#x27;t pretend to be a step-by-step guide."><meta data-react-helmet="true" property="og:url" content="https://www.ory.sh//hydra/docs/guides/migrating-from-MITREid"><link data-react-helmet="true" rel="shortcut icon" href="/hydra/docs/img/favico.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://www.ory.sh//hydra/docs/guides/migrating-from-MITREid"><link rel="stylesheet" href="/hydra/docs/styles.79b48577.css">
<link rel="preload" href="/hydra/docs/styles.82406bae.js" as="script">
<link rel="preload" href="/hydra/docs/runtime~main.2c0aaa1c.js" as="script">
<link rel="preload" href="/hydra/docs/main.037eab63.js" as="script">
<link rel="preload" href="/hydra/docs/2.84177ffd.js" as="script">
<link rel="preload" href="/hydra/docs/3.26316430.js" as="script">
<link rel="preload" href="/hydra/docs/1be78505.7437791d.js" as="script">
<link rel="preload" href="/hydra/docs/b8d7c5e6.8c93b1cd.js" as="script">
<link rel="preload" href="/hydra/docs/414.56788c5e.js" as="script">
<link rel="preload" href="/hydra/docs/413.8424695c.js" as="script">
<link rel="preload" href="/hydra/docs/0a938fda.811e5f29.js" as="script">
<link rel="preload" href="/hydra/docs/17896441.37f75b30.js" as="script">
<link rel="preload" href="/hydra/docs/25dd410d.2f152de2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://www.ory.sh/hydra" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/hydra/docs/img/logo-hydra.svg" alt="ORY Hydra"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/hydra/docs/">Docs</a><a href="https://www.ory.sh/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Ecosystem</a><a href="https://www.ory.sh/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://community.ory.sh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum</a><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chat</a><a href="https://github.com/ory/hydra" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/hydra/docs/versions">v1.9</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.ory.sh/hydra" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/hydra/docs/img/logo-hydra.svg" alt="ORY Hydra"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/hydra/docs/">Docs</a></li><li class="menu__list-item"><a href="https://www.ory.sh/docs" target="_blank" rel="noopener noreferrer" class="menu__link">Ecosystem</a></li><li class="menu__list-item"><a href="https://www.ory.sh/blog" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://community.ory.sh" target="_blank" rel="noopener noreferrer" class="menu__link">Forum</a></li><li class="menu__list-item"><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="menu__link">Chat</a></li><li class="menu__list-item"><a href="https://github.com/ory/hydra" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/hydra/docs/versions">v1.9</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: v1.9</span></div><header><h1 class="docTitle_1Lrw">Migrating from MITREid</h1></header><div class="markdown"><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Please note this page doesn&#x27;t pretend to be a step-by-step guide.</p></div></div><p>This piece of documentation will try to give you some hints to move your current MITREid instance to Hydra. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scopes"></a>Scopes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scopes" title="Direct link to heading">#</a></h4><p>Scopes in hydra doesn&#x27;t have a relational entity, every client defines its own array of scopes.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scope-vs-scp"></a>Scope vs Scp<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scope-vs-scp" title="Direct link to heading">#</a></h4><p>Since hydra uses scp as the scope claim, you have to be sure your client libraries are capable to use both, we had to modify the behavior of our version of spring.security.oauth2 library following the example: <a href="https://dev.to/toojannarong/spring-security-with-jwt-the-easiest-way-2i43" target="_blank" rel="noopener noreferrer">Custom claim</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="query-string-parameters"></a>Query String Parameters<a aria-hidden="true" tabindex="-1" class="hash-link" href="#query-string-parameters" title="Direct link to heading">#</a></h4><p>MITREid doesn&#x27;t mind if the parameters are passed in the body or in the query string. In order to work with hydra, you have to migrate all your calls that are using QS params to Body Parameters.</p><p>For example, you should move from<br>
```
curl -X POST  <a href="http://127.0.0.1/mitreid-server/token?grant_type=client_credentials" target="_blank" rel="noopener noreferrer">http://127.0.0.1/mitreid-server/token?grant_type=client_credentials</a> -H &quot;Authorization: $AUTH&quot; ...
```</p><p>to</p><p>```
curl -X POST  <a href="http://127.0.0.1/mitreid-server/token" target="_blank" rel="noopener noreferrer">http://127.0.0.1/mitreid-server/token</a> -H &quot;Authorization: $AUTH&quot; --data-urlencode &#x27;grant_type=client_credentials&#x27; ...
```</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scope-strategies-if-no-scope-is-requested"></a>Scope Strategies if no scope is requested<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scope-strategies-if-no-scope-is-requested" title="Direct link to heading">#</a></h4><p>The last pitfall found during the migration was the difference of behavior when you request a <em>client_credentials</em> token and you don&#x27;t specify any token,
by default hydra doesn&#x27;t return any scope but MITREid returns all associated scopes to the client. To enable this in hydra, you have set up the env variable <em>OAUTH2_CLIENT_CREDENTIALS_DEFAULT_GRANT_SCOPE=true</em>,
after enable this capability hydra will start serving all the scopes assigned to this client </p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ory/hydra/edit/master/docs/versioned_docs/version-v1.9/guides/migrating-from-mitreid.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-10-29T14:06:20.000Z" class="docLastUpdatedAt_217_">10/29/2020</time> by <strong>Bernat Mut</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.ory.sh/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.ory.sh/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://www.ory.sh/tos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 ORY GmbH</div></div></div><div id="codefund"></div><script src="https://codefund.io/properties/140/funder.js" async=""></script><script>document.querySelectorAll(".tabs .tabs-nav .nav-item a").forEach((function(t){t.addEventListener("click",(function(e){return e.preventDefault(),t.closest(".tabs-nav").querySelectorAll(".nav-item a").forEach((function(t){t.classList.remove("active")})),t.closest(".tabs").querySelectorAll(".tab-content .tab-pane").forEach((function(t){t.classList.remove("active")})),t.classList.add("active"),document.getElementById(t.href.split("#")[1]).classList.add("active"),!1}))}))</script></footer></div>
<script src="/hydra/docs/styles.82406bae.js"></script>
<script src="/hydra/docs/runtime~main.2c0aaa1c.js"></script>
<script src="/hydra/docs/main.037eab63.js"></script>
<script src="/hydra/docs/2.84177ffd.js"></script>
<script src="/hydra/docs/3.26316430.js"></script>
<script src="/hydra/docs/1be78505.7437791d.js"></script>
<script src="/hydra/docs/b8d7c5e6.8c93b1cd.js"></script>
<script src="/hydra/docs/414.56788c5e.js"></script>
<script src="/hydra/docs/413.8424695c.js"></script>
<script src="/hydra/docs/0a938fda.811e5f29.js"></script>
<script src="/hydra/docs/17896441.37f75b30.js"></script>
<script src="/hydra/docs/25dd410d.2f152de2.js"></script>
</body>
</html>