
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>PHP SDK Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Aeneas Rekkas">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-etoc/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-versions-ory/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../8-faq/0-README.html" />
    
    
    <link rel="prev" href="2-js.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../">
            
                <a href="../">
            
                    
                    ORY Hydra
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../0-tutorial/0-README.html">
            
                <a href="../0-tutorial/0-README.html">
            
                    
                    5 Minute Tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../1-environment/0-README.html">
            
                <a href="../1-environment/0-README.html">
            
                    
                    Dependencies & Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../2-overview/0-README.html">
            
                <a href="../2-overview/0-README.html">
            
                    
                    Concepts and Theory
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../2-overview/1-oauth2.html">
            
                <a href="../2-overview/1-oauth2.html">
            
                    
                    OAuth 2.0 & OpenID Connect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../2-overview/2-jwk.html">
            
                <a href="../2-overview/2-jwk.html">
            
                    
                    JSON Web Keys
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../2-overview/3-access-control.html">
            
                <a href="../2-overview/3-access-control.html">
            
                    
                    Access Control
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../3-install/0-README.html">
            
                <a href="../3-install/0-README.html">
            
                    
                    Install, Configure and Run ORY Hydra
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../4-security/0-README.html">
            
                <a href="../4-security/0-README.html">
            
                    
                    Security Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../5-telemetry/0-README.html">
            
                <a href="../5-telemetry/0-README.html">
            
                    
                    Telemetry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../6-how-to/0-README.html">
            
                <a href="../6-how-to/0-README.html">
            
                    
                    How To
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../6-how-to/1-production.html">
            
                <a href="../6-how-to/1-production.html">
            
                    
                    ORY Hydra in production
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="0-README.html">
            
                <a href="0-README.html">
            
                    
                    SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.8.1" data-path="1-go.html">
            
                <a href="1-go.html">
            
                    
                    Go SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8.2" data-path="2-js.html">
            
                <a href="2-js.html">
            
                    
                    JavaScript SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.8.3" data-path="3-php.html">
            
                <a href="3-php.html">
            
                    
                    PHP SDK
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../8-faq/0-README.html">
            
                <a href="../8-faq/0-README.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../2-oathkeeper/">
            
                <a href="../../2-oathkeeper/">
            
                    
                    ORY Oathkeeper
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../2-oathkeeper/1-Quickstart/0-README.html">
            
                <a href="../../2-oathkeeper/1-Quickstart/0-README.html">
            
                    
                    Quickstart
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../2-oathkeeper/1-Quickstart/1-INSTALLATION.html">
            
                <a href="../../2-oathkeeper/1-Quickstart/1-INSTALLATION.html">
            
                    
                    Installing ORY Oathkeeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../2-oathkeeper/1-Quickstart/2-EXECUTION.html">
            
                <a href="../../2-oathkeeper/1-Quickstart/2-EXECUTION.html">
            
                    
                    Running ORY Oathkeeper
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../2-oathkeeper/2-Concepts/0-README.html">
            
                <a href="../../2-oathkeeper/2-Concepts/0-README.html">
            
                    
                    Concepts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../2-oathkeeper/2-Concepts/1-TERMINOLOGY.html">
            
                <a href="../../2-oathkeeper/2-Concepts/1-TERMINOLOGY.html">
            
                    
                    Terminology
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../2-oathkeeper/2-Concepts/2-RULES.html">
            
                <a href="../../2-oathkeeper/2-Concepts/2-RULES.html">
            
                    
                    Rules
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../2-oathkeeper/3-Deyploment/0-README.html">
            
                <a href="../../2-oathkeeper/3-Deyploment/0-README.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../2-oathkeeper/4-Security/0-README.html">
            
                <a href="../../2-oathkeeper/4-Security/0-README.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >PHP SDK</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="php-sdk">PHP SDK</h2>
<h3 id="installation">Installation</h3>
<p>Installation is best done using <a href="https://getcomposer.org/" target="_blank">composer</a></p>
<pre><code>composer require ory/hydra-sdk
</code></pre><p>If your project doesn&apos;t already make use of composer, you will need to include the resulting <code>vendor/autoload.php</code> file.</p>
<h3 id="configuration">Configuration</h3>
<h4 id="oauth2-configuration">OAuth2 configuration</h4>
<p>We need OAuth2 capabilities in order to make authorized API calls. You can either write your own OAuth2 mechanism or
use an existing one that has been preconfigured for use with Hydra. Here we use a modified version of the league OAuth2
client that has had this work done for us.</p>
<pre><code class="lang-sh">composer require tulip/oauth2-hydra
</code></pre>
<pre><code class="lang-php"><span class="hljs-comment">// Get an access token using your account credentials.</span>
<span class="hljs-comment">// Note that if you are using the Hydra inside docker as per the getting started docs, the domain will be hydra:4444 from</span>
<span class="hljs-comment">// within another container.</span>
$provider = <span class="hljs-keyword">new</span> \Hydra\OAuth2\Provider\OAuth2([
    <span class="hljs-string">&apos;clientId&apos;</span> =&gt; <span class="hljs-string">&apos;admin&apos;</span>,
    <span class="hljs-string">&apos;clientSecret&apos;</span> =&gt; <span class="hljs-string">&apos;demo-password&apos;</span>,
    <span class="hljs-string">&apos;domain&apos;</span> =&gt; <span class="hljs-string">&apos;http://localhost:4444&apos;</span>,
]);

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Get an access token using the client credentials grant.</span>
    <span class="hljs-comment">// Note that you must separate multiple scopes with a plus (+)</span>
    $accessToken = $provider-&gt;getAccessToken(
        <span class="hljs-string">&apos;client_credentials&apos;</span>, [<span class="hljs-string">&apos;scope&apos;</span> =&gt; <span class="hljs-string">&apos;hydra.clients&apos;</span>]
    );
} <span class="hljs-keyword">catch</span> (\Hydra\Oauth2\Provider\<span class="hljs-keyword">Exception</span>\ConnectionException $e) {
    <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Connection to hydra failed: &quot;</span> . $e-&gt;getMessage());
} <span class="hljs-keyword">catch</span> (\Hydra\Oauth2\Provider\<span class="hljs-keyword">Exception</span>\IdentityProviderException $e) {
    <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Failed to get an access token: &quot;</span> . $e-&gt;getMessage());
}
</code></pre>
<h4 id="sdk-configuration">SDK configuration</h4>
<p>Using <code>$accessToken</code> from the above steps, you may now use the Hydra SDK:</p>
<pre><code class="lang-php">$config = <span class="hljs-keyword">new</span> \Hydra\SDK\Configuration();
$config-&gt;setHost(<span class="hljs-string">&apos;http://localhost:4444&apos;</span>);
<span class="hljs-comment">// Use true in production!</span>
$config-&gt;setSSLVerification(<span class="hljs-keyword">false</span>);
$config-&gt;setAccessToken($accessToken);

<span class="hljs-comment">// Pass the config into an ApiClient. You will need this client in the next ste.</span>
$hydraApiClient = <span class="hljs-keyword">new</span> \Hydra\SDK\ApiClient($config);
</code></pre>
<h3 id="api-usage">API Usage</h3>
<p>There are several APIs made available, see <a href="https://github.com/ory/hydra/blob/master/sdk/php/swagger/README.md" target="_blank">the full API docs</a> for a list of clients and methods.</p>
<p>For this example, lets use the OAuth2Api to get a list of clients and use the <code>$hydraApiClient</code> from above:</p>
<pre><code class="lang-php">$hydraOAuth2Api = <span class="hljs-keyword">new</span> \Hydra\SDK\Api\OAuth2Api($hydraApiClient);

<span class="hljs-keyword">try</span> {
    $clients = $hydraOAuthSDK-&gt;listOAuth2Clients();
} <span class="hljs-keyword">catch</span> ( \Hydra\SDK\ApiException $e) {
    <span class="hljs-keyword">if</span> ($e-&gt;getCode() == <span class="hljs-number">400</span>) {
        <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Permission denied to get clients. Check the scopes on your access token!&quot;</span>);
    }
    <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Failed to get clients: &quot;</span>.$e-&gt;getMessage());
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="2-js.html" class="navigation navigation-prev " aria-label="Previous page: JavaScript SDK">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../8-faq/0-README.html" class="navigation navigation-next " aria-label="Next page: FAQ">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"PHP SDK","level":"1.2.8.3","depth":3,"next":{"title":"FAQ","level":"1.2.9","depth":2,"path":"1-hydra/8-faq/0-README.md","ref":"1-hydra/8-faq/0-README.md","articles":[]},"previous":{"title":"JavaScript SDK","level":"1.2.8.2","depth":3,"path":"1-hydra/7-sdk/2-js.md","ref":"1-hydra/7-sdk/2-js.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","etoc","ga","sitemap-basepath","versions-ory"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"etoc":{"h2lb":2,"header":1,"maxdepth":5,"mindepth":2,"notoc":false},"versions-ory":{"type":"branches"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sitemap-basepath":{"hostname":"https://www.ory.sh/","basePath":"/docs/guides/"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"ga":{"configuration":"auto","token":"UA-71865250-1"},"versions":{"gitbookConfigURL":"https://raw.githubusercontent.com/ory/docs/master/guides/book.json","options":[{"value":"https://www.ory.sh/docs/guides/latest","text":"latest"},{"value":"https://www.ory.sh/docs/guides/v0.11.12","text":"0.11.12"}]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit this page","base":"https://github.com/ory/docs/tree/master/guides"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Aeneas Rekkas","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":">=3.2.3"},"file":{"path":"1-hydra/7-sdk/3-php.md","mtime":"2018-05-17T09:00:37.163Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-05-17T17:11:26.052Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-etoc/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-versions-ory/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

